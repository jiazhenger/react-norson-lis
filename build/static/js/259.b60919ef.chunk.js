(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[259],{138:function(t,e,n){"use strict";var a=Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(22)]).then(n.bind(null,143)),c=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),o=window.$fn;e.a={interfaceConfirm:function(t,e,n,o){e?a.then((function(a){a.default({msg:"\u662f\u5426\u786e\u8ba4".concat(e,"\uff1f"),onOk:function(a){window.$http.submit(null,t,{param:n}).then((function(t){c.then((function(t){return t.default.success("".concat(e,"\u6210\u529f"))})),o(),a()}))}})})):window.$http.submit(null,t,{param:n}).then((function(t){c.then((function(t){return t.default.success("".concat(e,"\u6210\u529f"))})),o()}))},sysTime:function(t,e){var n=o.getUser(),a="9";a=o.hasObject(n)?e||(n.timeline_node?n.timeline_node:"9"):e||"9";var c=parseInt(a)>9?"".concat(a,":00:00"):"0".concat(a,":00:00"),i=new Date;i.getHours()<Number(a)?1===t&&i.setTime(i.getTime()-864e5):2===t&&i.setTime(i.getTime()+864e5);var l=i.getFullYear(),r=i.getMonth()+1>9?i.getMonth()+1:"0".concat(i.getMonth()+1),s=i.getDate()>9?i.getDate():"0".concat(i.getDate()),u=i.getHours()>9?i.getHours():"0".concat(i.getHours()),d=i.getMinutes()>9?i.getMinutes():"0".concat(i.getMinutes()),h=i.getSeconds()>9?i.getSeconds():"0".concat(i.getSeconds());return c?"".concat(l,"-").concat(r,"-").concat(s," ").concat(c):"".concat(l,"-").concat(r,"-").concat(s," ").concat(u,":").concat(d,":").concat(h)},intervalTime:function(t,e){var n=new Date,a=n;t&&(a=new Date(n.getTime()-24*t*60*60*1e3));var c=a.getFullYear(),o=a.getMonth()+1>9?a.getMonth()+1:"0".concat(a.getMonth()+1),i=a.getDate()>9?a.getDate():"0".concat(a.getDate()),l=a.getHours()>9?a.getHours():"0".concat(a.getHours()),r=a.getMinutes()>9?a.getMinutes():"0".concat(a.getMinutes()),s=a.getSeconds()>9?a.getSeconds():"0".concat(a.getSeconds());return e?"".concat(c,"-").concat(o,"-").concat(i," ").concat(e):"".concat(c,"-").concat(o,"-").concat(i," ").concat(l,":").concat(r,":").concat(s)},img_domain_url:function(t){if(t){var e=o.local("user");return e&&Object.keys(e).length>0&&e.img_domain?e.img_domain+t:t}return""},exportExcel:function(t){var e=t.api,n=t.apiType,a=t.param,c=t.cb;window.$http[n||"pull"](null,e,a).then((function(t){window.location.href=t.url,c&&c()}))},switchFlag:function(t){return t?1:0},flagSwitch:function(t){return"1"===String(t)}}},601:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return S}));var a=n(5),c=n(22),o=n(23),i=n(27),l=n(25),r=n(24),s=n(0),u=n.n(s),d=n(138),h=window,f=h.$http,g=h.$fn,m=h.$async,p=m((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),b=m((function(){return n.e(5).then(n.bind(null,135))})),w=m((function(){return n.e(6).then(n.bind(null,137))})),v=m((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),y=n.e(9).then(n.bind(null,144)),S=function(t){Object(l.a)(n,t);var e=Object(r.a)(n);function n(){var t;Object(c.a)(this,n);for(var o=arguments.length,l=new Array(o),r=0;r<o;r++)l[r]=arguments[r];return(t=e.call.apply(e,[this].concat(l))).isEdit=!1,t.state={data:[],pag:{},selectedKeys:[],hospSelect:[]},t.typeOptions=[{label:"\u6b63\u5e38",value:"91,92,94,95,96,99"},{label:"\u7ec8\u6b62",value:"93"},{label:"\u8fdf\u53d1",value:"97"},{label:"\u9000\u5355",value:"98"}],t.forms=[{label:"\u59d3\u540d",name:"patient_name",type:"input"},{label:"\u5173\u8054\u6761\u7801\u53f7",name:"spec_code",type:"input"},{label:"\u533b\u9662",name:"hosp_id",type:"select",data:[],nameStr:"name",idStr:"value"},{label:"\u79cd\u7c7b",name:"status",type:"select",data:t.typeOptions,nameStr:"label",idStr:"value"},{label:"\u65e5\u671f",name:"date",type:"date-range",names:["start_date","end_date"]}],t.model={},t.fetch=function(e){return g.fetch.call(Object(i.a)(t),"kd-report-spec/myreportspec",e)},t.cols=[{type:"checkbox"},{title:"\u6761\u7801\u53f7",field:"spec_code",width:120,sort:!0},{title:"\u9001\u68c0\u5355\u4f4d",field:"hosp_name",width:220,sort:!0},{title:"\u9001\u68c0\u79d1\u5ba4",field:"department_name",width:100,sort:!0},{title:"\u9001\u68c0\u65f6\u95f4",field:"check_time",width:150,sort:!0},{title:"\u75c5\u4eba\u59d3\u540d",field:"patient_name",width:120},{title:"\u6027\u522b",field:"sex_name",width:80},{title:"\u5e74\u9f84",field:"newAge",width:100},{title:"\u62a5\u544a\u53d1\u5e03\u65f6\u95f4",field:"created_at",width:150,sort:!0},{title:"\u72b6\u6001",field:"status_name",width:70,sort:!0},{title:"\u64cd\u4f5c",align:"tc",width:80,render:function(t){t.rows;return Object(a.jsx)("div",{className:"plr5",children:Object(a.jsx)(p,{label:"\u9884\u89c8",ghost:!0,onClick:function(){}})})}}],t.ButtonGroup=function(){return[{label:"\u6279\u91cf\u63a5\u6536",ghost:!0,disabled:t.state.selectedKeys.length<=0,onClick:function(){var e={uuid:t.state.selectedKeys.map((function(t){return t.uuid}))};d.a.interfaceConfirm("kd-report-spec/uprec","\u6279\u91cf\u63a5\u6536",e,(function(){t.fetch()}))}},{label:"\u6279\u91cf\u6253\u5370",ghost:!0,disabled:t.state.selectedKeys.length<=0,onClick:function(){}}]},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;y.then((function(e){g.getCache({cache:e.default.BsHospitalSelect,name:"name",id:"value",callback:function(e){t.setState({data:e}),g.hasArray(e)?(t.forms[2].data=e,t.setState({hospSelect:e})):f.submit(null,"bs-hospital/select").then((function(e){t.forms[2].data=e,t.setState({hospSelect:e}),g.setCache()}))}})})),this.fetch(this.model)}},{key:"render",value:function(){var t=this,e=this.state,n=e.data,c=e.pullLoading,o=e.pag;return Object(a.jsxs)(b,{title:"\u62a5\u544a\u5355\u6d3e\u9001",ButtonGroup:this.ButtonGroup(),children:[Object(a.jsx)(w,{data:this.forms,onChange:function(e,n){return g.onChange.call(t,e,n)},onSubmit:g.onSubmit.bind(this),onReset:g.onReset.bind(this,this.forms),loading:c,init:function(e){return t.form=e}}),Object(a.jsx)(v,{className:"xplr",cols:this.cols,data:n,loading:c,onRow:function(e){return t.setState({selectedKeys:e})},pag:o,onChange:function(e,n){return g.pageChange.call(t,{current:e,pageSize:n})},onSort:function(e){return g.onSort.call(t,e)}})]})}}]),n}(u.a.Component)}}]);
(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[334],{1:function(t,n,e){"use strict";var a=e(2),o={hasArray:function(t){return o.isArray(t)&&t.length>0},hasObject:function(t){return o.isObject(t)&&Object.keys(t).length>0},isEmpty:function(t){return null===t||void 0===t||""===t},isValid:function(t){return!o.isEmpty(t)||0===t||!1===t}};["String","Number","Array","Object","Boolean","Function","Undefined"].forEach((function(t){return o["is"+t]=function(n){return{}.toString.call(n)==="[object "+t+"]"}}));var r=o,i=e(11),c=e.n(i),u=e(14),s=function(t){return{set:function(n,e){(function(t){var n={}.toString.call(t);return"[object Object]"===n||"[object Array]"===n})(e)&&(e=JSON.stringify(e)),t.setItem(n,e)},get:function(n){var e=t.getItem(n);if(null===e||void 0===e||""===e)return!1;try{return JSON.parse(e)}catch(a){return e}},remove:function(n){"string"===typeof n&&(n.indexOf(",")>-1?n.split(",").forEach((function(n){t.removeItem(n)})):t.removeItem(n))}}},l="db",f=function(){var t=window.indexedDB.open(l,1);return new Promise((function(n,e){t.onsuccess=function(e){var a=e.target.result.transaction(l,"readwrite").objectStore(l);n(a),t=null},t.onerror=function(t){console.log("db\u6570\u636e\u5e93\u4f7f\u7528\u5931\u8d25\uff1a"+t.srcElement.error.message),e(t.message)},t.onupgradeneeded=function(t){var n=t.target.result;n.objectStoreNames.contains(l)||n.createObjectStore(l),console.log("db \u8868\u521b\u5efa\u6210\u529f")}}))},d=function(t,n){f().then((function(e){var a=e.get(t);a.onsuccess=function(a){e.put(n,t)},a.onerror=function(t){console.log("\u5b58\u50a8\u6570\u636e\u5230 indexdb \u5931\u8d25")}}))},h=function(t){return new Promise((function(n,e){f().then((function(e){var a=e.get(t);a.onsuccess=function(t){n(t.target.result)},a.onerror=function(t){console.log("\u83b7\u53d6 indexdb \u6570\u636e\u5931\u8d25")}}))}))},p=function(t){f().then((function(n){var e=n.delete(t);e.onsuccess=function(t){console.log("\u5220\u9664 indexdb \u6570\u636e\u6210\u529f")},e.onerror=function(t){console.log("\u5220\u9664 indexdb \u6570\u636e\u5931\u8d25")}}))},m=s(window.localStorage),g=s(window.sessionStorage),b={local:function(t,n){return t=t||"user",arguments.length<=1?g.get(t):g.set(t,n)},remove:function(t){g.remove(t||"user")},getUser:function(){var t=this.local();return this.hasObject(t)?t:{}},longSave:function(t,n){return arguments.length<=1?m.get(t):m.set(t,n)},longRemove:function(t){m.remove(t)},dataSave:function(t,n){var e=arguments;return Object(u.a)(c.a.mark((function a(){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.length<=1)){a.next=6;break}return a.next=3,h(t);case 3:a.t0=a.sent,a.next=7;break;case 6:a.t0=d(t,n);case 7:return a.abrupt("return",a.t0);case 8:case"end":return a.stop()}}),a)})))()},dataRemove:function(t){p(t)}},v={query:function(t){var n=window.location.search||window.location.hash,e={};if(-1!==n.indexOf("?")){var a=n.split("?");(a=a[1].split("&")).forEach((function(t,n){var a=t.split("=");"undefined"!==a[1]&&"null"!==a[1]&&""!==a[1]&&(e[a[0]]=a[1])}))}return t?e[t]:e},getToken:function(t){var n=this.query("token"),e=this.getUser(),a=null;return n?a=n:e.token&&(a=e.token),a}},j={go:function(t){var n=t||"/login",e=window.location,a=e.port,o=e.protocol,r=e.hostname,i=e.pathname,c=80===a?"":":"+a;window.location.replace(o+"//"+r+c+i+"#"+n)},setTitle:function(t){window.document.title=t},copy:function(t){return JSON.parse(JSON.stringify(t))}},y=e(6),O={loading:function(t,n){var e=document.querySelector("#jzer-loading");e&&(t?(e.querySelector(".jzer-loading-msg").innerHTML=n||"\u6570\u636e\u52a0\u8f7d\u4e2d",e.style.display="block"):e.style.display="none")},toast:function(t,n,e){return Object(u.a)(c.a.mark((function a(){var o;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e=e||1500,(o=document.querySelector("#jzer-toast"))&&(o.style.display="block",o.querySelector(".jzer-toast-msg").innerHTML=t,setTimeout((function(){o.style.display="none",n&&n()}),e));case 3:case"end":return a.stop()}}),a)})))()},loginTo:function(t){if(t){var n=this.local("m-skip");return!!this.local("m-skip")&&decodeURIComponent(n).replace("#","")}this.local("m-skip",encodeURIComponent(window.location.hash))},css:function(t,n){return 1===arguments.length?t||"":2===arguments.length?t||"defaultValue":void 0},setModel:function(t,n,e){return Object(u.a)(c.a.mark((function o(){var r;return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=Object(a.a)({model:"model"},e),o.next=3,t.setState(Object(y.a)({},r.model,Object(a.a)(Object(a.a)({},t.state[r.model]),n)));case 3:return o.abrupt("return",t.state[r.model]);case 4:case"end":return o.stop()}}),o)})))()},setModels:function(t,n,e){return Object(u.a)(c.a.mark((function o(){var r;return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(t,n,e),r=Object(a.a)({model:"model"},e),t[r.model]=Object(a.a)(Object(a.a)({},t[r.model]),n),o.abrupt("return",t[r.model]);case 4:case"end":return o.stop()}}),o)})))()},val:function(t){return this.isValid(t)?t:"--"},nan:function(t){return isNaN(t)?"--":t},validModel:function(t){var n=this;return!this.hasObject(t)||Object.keys(t).some((function(e){return n.isArray(t[e])?!n.hasArray(t[e]):!n.isValid(t[e])}))},push:function(t,n,e){t.props.history.push(n,e)},replace:function(t,n,e){t.props.history.replace(n,e)},back:function(t){t.props.history.goBack()}},S={fetch:function(t,n,e){return window.$http.paging(this,t,{param:Object(a.a)(Object(a.a)({},n),this.model),loading:!1,callback:function(t){e&&e(t)}})},onChange:function(t,n,e,o){var r=this,i=null;for(var c in t)i=t[c];var u=e?e():null;window.$fn.setModels(this,Object(a.a)(Object(a.a)({},t),u)).then((function(t){o||!0===n&&!window.$fn.isEmpty(i)||r.fetch()}))},onSubmit:function(){window.$fn.getBody(this.model),this.fetch()},onSort:function(t){t?this.model=Object(a.a)(Object(a.a)({},this.model),t):(delete this.model.sort,delete this.model.sort_type),this.fetch()},onReset:function(t,n){var e=this;t.forEach((function(t){var n=t.name,a=t.names;a?(delete e.model[a[0]],delete e.model[a[1]]):delete e.model[n]})),n&&n(),this.fetch({})},pageChange:function(t){var n=t.current,e=t.pageSize;this.model=Object(a.a)(Object(a.a)({},this.model),{},{pageSize:e}),this.fetch({current:n})}},w=Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},r),b),v),j),O),S),{},{c0:"#2cd1d2",c1:"#FF5218",menuWidth:200,getRange:function(t,n){return this.hasArray(t)?{sdate:this.format(t[0],{t:n}),edate:this.format(t[1],{t:n})}:{start:null,end:null}},getDate:function(t,n){return t?this.format(t[0],{t:n}):null},getBody:function(t){for(var n in t){var e=t[n];this.isValid(e)||delete t[n]}return t},addKey:function(t,n){var e=this,a=t.page,o=a.limit,r=a.current,i=t.items,c=o*(r-1)+1;return this.hasArray(i)&&i.forEach((function(t,a){i[a].key=c+a,e.hasObject(n)&&n.f.forEach((function(a,o){t[a+"Str"]=e.format(t[a],{t:n.t})}))})),i},addKeys:function(t,n){var e=this;this.hasArray(t)?t.forEach((function(a,o){t[o].key=o+1,e.hasObject(n)&&n.f.forEach((function(t,o){a[t+"Str"]=e.format(a[t],{t:n.t})}))})):this.hasObject(t)&&Object.keys(t).forEach((function(a,o){e.hasObject(n)&&n.f.forEach((function(a,o){t[a+"Str"]=e.format(t[a],{t:n.t})}))}))},refreshRouter:function(){window.proxy.refresh()},getRoot:function(t){var n=window.location.hash.split("/");if(t){var e="/";return n.forEach((function(n,a){a>0&&a<=t&&(e+=n+"/")})),{root:e}}return{root:"/"+n[1]+"/",munu:n[1]}},getRouter:function(t){var n=this,e=this.getRoot(),a=e.root,o=e.munu,r=JSON.parse(JSON.stringify(t)),i=null;return function t(e){e.forEach((function(e,r){i||0===r&&(e.root=a+e.root,e.to&&(e.to=a+e.to),i=!0),e.path&&(e.path=a+e.path),e.component||a||(e.component=o+"/"+e.path);var c=e.children;n.hasArray(c)&&t(c)}))}(r),r},leak:function(t){var n;return function(e){clearTimeout(n),n=setTimeout((function(){t()}),e||100)}},filterSelect:function(t,n,e,a){if(n){var o=t.filter((function(t){return String(t[a||"value"])===String(n)}));return this.hasArray(o)?o[0][e||"name"]:""}return"--"},getDisItem:function(t){var n=this,e=t.code,a=t.callback;this.dataSave("dis-item-".concat(e)).then((function(t){n.hasArray(t)?a&&a(t):window.$http.submit(null,"dis-item/item",{param:{dis_code:e},loading:!1}).then((function(t){n.dataSave("dis-item-".concat(e),t),a&&a(t)}))}))},updateCacheList:function(t){var n=this,e="";t.map((function(t){e=t.api.replace("api/",""),window.$http.submit(null,e).then((function(e){var a=e.items?e.items:e;n.dataSave("".concat(t.api),a)}))}))},setCache:function(){var t=this,n=[];window.$http.submit(null,"cache-api/index").then((function(e){t.dataSave("cache-list").then((function(a){t.hasArray(a)?(e.forEach((function(t){a.forEach((function(e){t.api===e.api&&new Date(t.updated_at).getTime()>new Date(e.updated_at).getTime()&&(n.push(t),e.updated_at=t.updated_at)}))})),t.dataSave("cache-list",a)):(n=e,t.dataSave("cache-list",n)),t.hasArray(n)&&t.updateCacheList(n)}))}))},getCache:function(t){var n=this,e=t.cache,a=t.name,o=t.id,r=t.callback;this.dataSave(e).then((function(t){n.hasArray(t)&&t.map((function(t){t.name=t[a]||t.name,t.value=t[o]||t.value})),r&&r(t)}))},setSubmitValues:function(t,n,e){t.forEach((function(t){for(var e in n)e===t.name&&(t.value=n[e])})),e&&e(t)},replaceApi:function(t){return t.replace("api/","")||""},handleSymbol:function(t){return t&&t.indexOf("+")>=0&&(t=t.replace(/\+/g,"%2B")),t&&t.indexOf("/")>=0&&(t=t.replace(/\//g,"%2F")),t},getObjectParam:function(t,n){var e=this,a={},o=function(o){var r=n[o];e.hasArray(r)?r.forEach((function(n,e){a[t+"["+o+"]["+e+"]"]=n})):a[t+"["+o+"]"]=r};for(var r in n)o(r);return a}});n.a=w},13:function(t,n){var e="http://mapi.norsonmed.com/api/",a="http://test.norsonmed.com:890/api/";e=a,t.exports={api:e,env:false,contentType:1}},43:function(t,n,e){},44:function(t,n,e){},69:function(t,n,e){"use strict";e.r(n);var a=e(5),o=(e(43),e(44),e(1)),r=e(6),i=e(2),c=e(18),u=e.n(c),s=e(13),l=e.n(s),f=function(t,n){l.a.env&&console.log(t,n)},d=function(t,n){if(!o.a.hasObject(t))return"";var e=t,a="";for(var r in e){var i=e[r];o.a.hasArray(i)?i.forEach((function(t,n){if(o.a.isObject(t))for(var e in t)a+=r+"["+n+"]["+e+"]="+t[e]+"&";else a+=r+"["+n+"]="+t+"&"})):(o.a.isValid(e[r])||""===e[r])&&(a+=r+"="+e[r]+"&")}return"&"===a.charAt(a.length-1)&&(a=a.slice(0,a.length-1)),a=n?a:"?"+a,encodeURI(a)},h=function(t,n){if(t){var e=t[n];return e=o.a.isArray(e)?[]:o.a.isObject(e)?{}:"",o.a.isValid(n)&&(t[n]=e),e}},p=function(t,n,e,a){var r=a||{},i=-1!==t.indexOf("http")?t:l.a.api,c=function(t){if(o.a.isFunction(t))return t();if(o.a.hasObject(t)){for(var n in t){var e=t[n];o.a.isValid(e)||(e="")}return t}return t}(n);c=1===r.type?d(c,!0):c;var s,h=d(c),p=function(t){var n=t.type,e=t.token,a=t.api;t.upload&&(n=2);var r=["application/json;charset=utf-8","application/x-www-form-urlencoded","multipart/form-data"][o.a.isValid(n)?n:l.a.contentType];return{baseURL:a,headers:!1===e?{"Content-Type":r}:{"Content-Type":r,Authorization:o.a.getToken()},timeout:3e4}}({type:r.type,upload:r.upload,token:r.token,api:i});return o.a.isFunction(r.onStart)&&r.onStart(),"get"===e?(s=u.a.get(t+h,p),f("%c"+e+" === "+i+t+h,"color:blue")):(s=u.a.post(t,c,p),f("%c"+e+" === "+i+t+JSON.stringify(c),"color:blue")),new Promise((function(n,e){s.then((function(a){var i=a.data,c=1*i.status;1===c?(n(i.data),f(t+"===",i.data)):-10404417===c||-10404413===c?(o.a.toast(i.msg),o.a.remove(),o.a.loginTo(),setTimeout((function(){return o.a.go("/login")}))):(e(i),r.onMsg?o.a.isFunction(r.onMsg)&&r.onMsg(i):o.a.toast(i.msg,r.onError),o.a.isFunction(r.onFail)&&r.onFail(i),f(t+"===",i)),o.a.isFunction(r.onEnd)&&r.onEnd(i),o.a.isFunction(r.onSuccess)&&r.onSuccess(i)}),(function(t){r.noError||o.a.toast("\u670d\u52a1\u5668\u6216\u7f51\u7edc\u51fa\u9519"),o.a.isFunction(r.onNet)&&r.onNet(),o.a.isFunction(r.onError)&&r.onError(),o.a.isFunction(r.onEnd)&&r.onEnd()}))}))},m=function(t,n,e){var a,c=Object(i.a)({dataName:"data",loading:!1,param:{},pullLoading:"pullLoading",loadingText:"\u6570\u636e\u52a0\u8f7d\u4e2d..."},e);t&&o.a.isValid(c.isFirst)?t.setState((a={},Object(r.a)(a,c.pullLoading,!0),Object(r.a)(a,"isFirst",c.isFirst),a)):t&&t.setState(Object(r.a)({},c.pullLoading,!0));return c.isFirst||c.loading&&o.a.loading(!0,c.loadingText),new Promise((function(e,a){var i,u,s;(i=n,u=c.param,s={onStart:function(){c.onStart&&c.onStart(!0)},onEnd:function(){t&&t.setState(Object(r.a)({},c.pullLoading,!1)),c.loading&&o.a.loading(!1),c.onEnd&&c.onEnd(!1)},onMsg:c.onMsg&&function(t){o.a.isFunction(c.onMsg)&&c.onMsg(t)},noError:c.noError,onError:function(){h(t,c.dataName),c.onError&&c.onError(),c.loading||o.a.loading(!1)},token:c.token},p(i,u,"get",s)).then((function(n){if(o.a.isValid(n))o.a.isFunction(c.onSuccess)&&(n=c.onSuccess(n)),o.a.isValid(c.dataName)&&t&&t.setState(Object(r.a)({},c.dataName,n)),e(n);else{var a=h(t,c.dataName);e(a)}}))}))},g={submit:function(t,n,e){var a=Object(i.a)({param:{},loadingText:"\u6570\u636e\u63d0\u4ea4\u4e2d...",successText:"",succeedFn:null,errorText:"",submitLoading:"submitLoading",loading:!0,runFirst:!0,type:l.a.contentType},e);t&&t.setState(Object(r.a)({},a.submitLoading,!0)),a.loading&&o.a.loading(!0,a.loadingText);var c=function(){t&&(a.replace&&t.props.history.replace(a.replace),a.push&&t.props.history.push(a.push)),a.onSuccess&&a.onSuccess()};return new Promise((function(e,i){var u,s,l;(u=n,s=a.param,l={onStart:function(){a.onStart&&a.onStart(!0)},onEnd:function(){t&&t.setState(Object(r.a)({},a.submitLoading,!1)),a.loading&&o.a.loading(!1),a.onEnd&&a.onEnd(!1)},onMsg:a.onMsg&&function(t){o.a.isFunction(a.onMsg)&&a.onMsg(t)},noError:a.noError,onError:a.onError,upload:a.upload,token:a.token,isBody:a.isBody,type:a.type},p(u,s,"post",l)).then((function(t){e(t),a.successText?a.runFirst?(o.a.toast(a.successText),c()):o.a.toast(a.successText,c):c()}),(function(n){i(n),a.myToast&&t.refs.toast&&t.refs.toast.open({text:n.info})}))}))},pull:m,paging:function(t,n,e){var a={dataName:"data",loading:!0,param:{},pagingLoading:"pullLoading",resetData:!1,pag:"pag"};Object.assign(a,e||{});var c=a.param||{},u=c.current,s=c.pageSize,l=Object(i.a)({page:u||1,limit:s||20},a.param);return delete l.pageSize,delete l.total,delete l.current,new Promise((function(e){m(t,n,{onStart:function(){a.onStart&&a.onStart(!0)},onEnd:function(){a.onStart&&a.onEnd(!0)},onError:a.onError,loading:a.loading,param:l,pullLoading:a.pagingLoading,resetData:!0,dataName:null}).then((function(n){var c=n.items||n;t.setState(Object(r.a)({},a.pag,Object(i.a)(Object(i.a)({},t.state[a.pag]),{},{current:+n.current,total:+n.total_items,totalPage:+n.total_pages,pageSize:+n.limit})),(function(){o.a.isValid(a.dataName)&&(t.setState(Object(r.a)({},a.dataName,c)),e(c))})),a.callback&&a.callback(n)}))}))}},b=e(22),v=e(23),j=e(25),y=e(24),O=e(0);window.$fn=o.a,window.$http=g,window.$config=l.a,window.$async=function(t){return function(n){Object(j.a)(o,n);var e=Object(y.a)(o);function o(){var t;Object(b.a)(this,o);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={component:null},t}return Object(v.a)(o,[{key:"componentDidMount",value:function(){var n=this;t().then((function(t){n.setState({component:t.default})}))}},{key:"render",value:function(){var t=this.state.component;return t?Object(a.jsx)(t,Object(i.a)({},this.props)):null}}]),o}(O.Component)};var S=e(21),w=e.n(S),E=function(t){t&&t instanceof Function&&e.e(408).then(e.bind(null,640)).then((function(n){var e=n.getCLS,a=n.getFID,o=n.getFCP,r=n.getLCP,i=n.getTTFB;e(t),a(t),o(t),r(t),i(t)}))},k=e(28),x=window.$async,F=x((function(){return e.e(373).then(e.bind(null,641))})),T=x((function(){return Promise.all([e.e(2),e.e(1),e.e(342),e.e(389)]).then(e.bind(null,642))})),A=x((function(){return e.e(382).then(e.bind(null,643))})),N=x((function(){return e.e(381).then(e.bind(null,644))})),L=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(T,{children:Object(a.jsx)(k.HashRouter,{children:Object(a.jsx)(F,{})})}),Object(a.jsx)(A,{}),Object(a.jsx)(N,{})]})};w.a.render(Object(a.jsx)(L,{}),document.querySelector("#app-root")),document.body.removeChild(document.querySelector("#app-loading")),E()}},[[69,335,340]]]);
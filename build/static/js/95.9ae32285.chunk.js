(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[95],{138:function(e,t,n){"use strict";var a=Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(22)]).then(n.bind(null,143)),c=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),i=window.$fn;t.a={interfaceConfirm:function(e,t,n,i){t?a.then((function(a){a.default({msg:"\u662f\u5426\u786e\u8ba4".concat(t,"\uff1f"),onOk:function(a){window.$http.submit(null,e,{param:n}).then((function(e){c.then((function(e){return e.default.success("".concat(t,"\u6210\u529f"))})),i(),a()}))}})})):window.$http.submit(null,e,{param:n}).then((function(e){c.then((function(e){return e.default.success("".concat(t,"\u6210\u529f"))})),i()}))},sysTime:function(e,t){var n=i.getUser(),a="9";a=i.hasObject(n)?t||(n.timeline_node?n.timeline_node:"9"):t||"9";var c=parseInt(a)>9?"".concat(a,":00:00"):"0".concat(a,":00:00"),o=new Date;o.getHours()<Number(a)?1===e&&o.setTime(o.getTime()-864e5):2===e&&o.setTime(o.getTime()+864e5);var r=o.getFullYear(),u=o.getMonth()+1>9?o.getMonth()+1:"0".concat(o.getMonth()+1),s=o.getDate()>9?o.getDate():"0".concat(o.getDate()),l=o.getHours()>9?o.getHours():"0".concat(o.getHours()),d=o.getMinutes()>9?o.getMinutes():"0".concat(o.getMinutes()),p=o.getSeconds()>9?o.getSeconds():"0".concat(o.getSeconds());return c?"".concat(r,"-").concat(u,"-").concat(s," ").concat(c):"".concat(r,"-").concat(u,"-").concat(s," ").concat(l,":").concat(d,":").concat(p)},intervalTime:function(e,t){var n=new Date,a=n;e&&(a=new Date(n.getTime()-24*e*60*60*1e3));var c=a.getFullYear(),i=a.getMonth()+1>9?a.getMonth()+1:"0".concat(a.getMonth()+1),o=a.getDate()>9?a.getDate():"0".concat(a.getDate()),r=a.getHours()>9?a.getHours():"0".concat(a.getHours()),u=a.getMinutes()>9?a.getMinutes():"0".concat(a.getMinutes()),s=a.getSeconds()>9?a.getSeconds():"0".concat(a.getSeconds());return t?"".concat(c,"-").concat(i,"-").concat(o," ").concat(t):"".concat(c,"-").concat(i,"-").concat(o," ").concat(r,":").concat(u,":").concat(s)},img_domain_url:function(e){if(e){var t=i.local("user");return t&&Object.keys(t).length>0&&t.img_domain?t.img_domain+e:e}return""},exportExcel:function(e){var t=e.api,n=e.apiType,a=e.param,c=e.cb;window.$http[n||"pull"](null,t,a).then((function(e){window.location.href=e.url,c&&c()}))},switchFlag:function(e){return e?1:0},flagSwitch:function(e){return"1"===String(e)}}},420:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var a=n(5),c=n(22),i=n(23),o=n(27),r=n(25),u=n(24),s=n(0),l=n.n(s),d=n(138),p=window,f=p.$http,h=p.$fn,g=p.$async,m=g((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),w=g((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(12),n.e(19)]).then(n.bind(null,170))})),b=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),v=g((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),_=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return(e=t.call.apply(t,[this].concat(r))).state={data:[],selectedKeys:[],params:{},spec_typeOption:[],param:{}},e.audit_statusSelect=[],e.enabledSelect=[{label:"\u5df2\u5ba1\u6838",value:"1"},{label:"\u5f85\u5ba1\u6838",value:"0"},{label:"\u5f85\u4fdd\u5b58",value:"-2"}],e.model={},e.fetch=function(t){return h.fetch.call(Object(o.a)(e),"specimen-kind/index",t)},e.cols=[{title:"\u9879\u76ee\u4ee3\u7801",field:"kind_code",width:120},{title:"\u9879\u76ee\u540d\u79f0",field:"kind_name",width:200},{title:"\u9879\u76ee\u5c5e\u6027",field:"kind_type_name",width:120},{title:"\u9879\u76ee\u7c7b\u522b",field:"category_name",width:120},{title:"\u5b50\u9879\u76ee",field:"child_kind_name",width:240},{title:"\u5c97\u4f4d",field:"project_name",width:120},{title:"\u9879\u76ee\u72b6\u6001",field:"enabled",width:120,render:function(t){var n=t.rows;return window.$fn.filterSelect(e.enabledSelect,n.enabled,"label","value")}},{title:"\u6807\u672c\u7c7b\u578b",field:"spec_type",width:160,render:function(t){var n=t.rows,c=t.index;return Object(a.jsx)(w,{name:"spec_type",data:e.state.spec_typeOption,p:"\u8bf7\u9009\u62e9\u6807\u672c\u7c7b\u578b",nameStr:"name",idStr:"value",value:n.spec_type,onChanged:function(t,a){return e.onChanges(t,a,n,c)},width:150})}},{title:"\u64cd\u4f5c",field:"enabled",width:110,render:function(t){var n=t.rows;return"1"===String(n.enabled)?"":Object(a.jsx)(m,{onClick:function(){return e.delRows(n)},ghost:!0,type:"primary",children:"\u5220\u9664"})},align:"tc"}],e.onChanges=function(t,n,a,c){console.log(t,n,c);var i=e.state.data;if(i[c][Object.keys(t)[0]]=h.hasObject(n)?n.value:"",e.setState({data:i}),"spec_type"===Object.keys(t)[0]){var o={spec_type:n.value,uuid:a.uuid};f.submit(null,"specimen-kind/savespectype",{param:o}).then((function(e){b.then((function(e){return e.default.success("\u64cd\u4f5c\u6210\u529f")}))}))}},e.delRows=function(t){console.log(e.props);var n=e.props,a=n.isBatch,c=n.speceDataList,i={kind_id:t.uuid,spec_id:[t.spec_id],to_spec_ids:a?c.map((function(e){return e.uuid})):[]};d.a.interfaceConfirm("specimen-kind/del","\u5220\u9664",i,(function(){b.then((function(e){return e.default.success("\u5220\u9664\u6210\u529f")})),e.getPage(e.state.param)}))},e.getPage=function(t){e.setState({param:t}),t?e.fetch(t):e.setState({data:[]})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),h.dataSave("dis-item-2000-data").then((function(t){h.hasArray(t)?e.setState({spec_typeOption:t}):f.submit(null,"dis-item/item",{param:{dis_code:2e3}}).then((function(t){e.setState({spec_typeOption:t}),h.dataSave("dis-item-2000-data",t)}))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,c=t.pullLoading;return Object(a.jsx)(v,{className:"xplr",cols:this.cols,data:n,loading:c,onRow:function(t){return e.setState({selectedKeys:t})},onChange:function(t,n){return h.pageChange.call(e,{current:t,pageSize:n})}})}}]),n}(l.a.Component)}}]);
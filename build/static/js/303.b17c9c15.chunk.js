(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[303],{537:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var i=n(5),l=n(22),a=n(23),o=n(27),d=n(25),r=n(24),u=n(0),c=n.n(u),s=window,h=s.$http,f=s.$fn,m=s.$async,p=(m((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123))),_=Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(22)]).then(n.bind(null,143)),b=n.e(9).then(n.bind(null,144)),w=m((function(){return n.e(5).then(n.bind(null,135))})),g=m((function(){return n.e(6).then(n.bind(null,137))})),v=m((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),y=function(e){Object(d.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(e=t.call.apply(t,[this].concat(a))).state={data:[],pag:{},selectedKeys:[]},e.outsourStatusOption=[{label:"\u5168\u90e8",value:""},{label:"\u5f85\u6d3e\u9001",value:1},{label:"\u6d3e\u9001\u4e2d",value:2},{label:"\u5df2\u9001\u8fbe",value:3}],e.forms=[{label:"\u7269\u6d41\u4eba\u5458",name:"empl_id",type:"select",data:[]},{label:"\u6d3e\u9001\u72b6\u6001",name:"outsourcing_status",type:"select",data:e.outsourStatusOption,nameStr:"label",idStr:"value"},{label:"\u5916\u9001\u65f6\u95f4",name:"date",names:["start_at","end_at"],type:"date-range"},{label:"\u6761\u7801\u53f7",name:"spec_code"}],e.model={spec_code:"",outsourcing_status:"",outsourcing_type:"",empl_id:"",start_date:"",end_date:""},e.fetch=function(t){return f.fetch.call(Object(o.a)(e),"bill-st/outsourcingList",t)},e.cols=[{title:"\u5916\u9001\u5355\u4f4d",field:"outsourcing_company",width:130},{title:"\u5916\u9001\u65f6\u95f4",field:"outsourcing_created_at",width:160},{title:"\u6d3e\u9001\u72b6\u6001",field:"outsourcing_status",width:80,render:function(t){var n=t.rows;return window.$fn.filterSelect(e.outsourStatusOption,n.outsourcing_status,"label","value")}},{title:"\u9001\u8fbe\u65f6\u95f4",field:"outsourcing_updated_at",width:160},{title:"\u5916\u9001\u4eba\u5458",field:"outsourcing_empl",width:100},{title:"\u5c97\u4f4d",field:"project_name",width:100},{title:"\u63a5\u6536\u65f6\u95f4",field:"check_time",width:160},{title:"\u5ba2\u6237\u540d\u79f0",field:"hosp_name",width:100},{title:"\u6761\u7801\u53f7",field:"old_spec_code",width:130,render:function(e){var t=e.rows,n=t.old_spec_code;return 14==n.length?(n=n.slice(0,11)+"-"+n.slice(12),t.old_spec_code=n):t.old_spec_code=n}},{title:"\u81ea\u7136\u9879\u76ee",field:"parent_kind_name",width:130},{title:"\u9879\u76ee\u540d\u79f0",field:"kind_name",width:130},{title:"\u9001\u68c0\u79d1\u5ba4",field:"department_name",width:100},{title:"\u6807\u51c6\u4ef7\u683c",field:"sprice",width:80},{title:"\u5b9e\u9645\u4ef7\u683c",field:"price",width:80},{title:"\u59d3\u540d",field:"patient_name",width:80},{title:"\u6027\u522b",field:"sex_name",width:80},{title:"\u5e74\u9f84",field:"age",width:80},{title:"\u9001\u68c0\u79d1\u5ba4",field:"department_name",width:100},{title:"\u533b\u751f",field:"doctor",width:100},{title:"\u5907\u6ce8",field:"remark",width:100},{title:"\u8d26\u5355\u5c5e\u6027",field:"attribute_name",width:100},{title:"\u5b9e\u9a8c\u79d1\u5ba4",field:"project_parent_name",width:100},{title:"\u5f00\u7968\u5355\u4f4d\uff08NC\uff09",field:"organization_name",width:100},{title:"\u5f00\u7968\u5355\u4f4d\u7f16\u7801\uff08NC\uff09",field:"organization_code",width:160},{title:"\u4e1a\u52a1\u5458",field:"salesman_user",width:100},{title:"\u4e1a\u52a1\u5458\u7f16\u7801",field:"salesman_code",width:100},{title:"\u533a\u57df",field:"region_name",width:100},{title:"\u533a\u57df\u7f16\u7801",field:"region_num",width:100}],e.ButtonGroup=function(){return[{label:"\u5bfc\u51fa",onClick:function(){_.then((function(e){e.default({msg:"\u662f\u5426\u5bfc\u51fa\u6570\u636e?",onOk:function(e){h.submit(null,"bill-st/outsourcingList",{param:{export:1}}).then((function(t){p.then((function(e){return e.default.success("\u5bfc\u51fa\u6210\u529f")})),window.location.href=t.url,e()}))}})}))}}]},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.then((function(t){var n=t.default;f.getCache({cache:n.employeeSelect,callback:function(t){f.hasArray(t)?e.forms[0].data=t:h.submit(null,"employee/select").then((function(t){e.forms[0].data=t,f.setCache()}))}}),f.getCache({cache:n.employeeSelect,callback:function(t){f.hasArray(t)?e.forms[0].data=t:h.submit(null,"employee/select").then((function(t){e.forms[0].data=t,f.setCache()}))}})})),this.fetch(this.model)}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,l=t.pullLoading,a=t.pag;return Object(i.jsxs)(w,{title:"\u5916\u5305\u6e05\u5355\u7ba1\u7406",ButtonGroup:this.ButtonGroup(),children:[Object(i.jsx)(g,{data:this.forms,onChange:function(t,n,i){var l=i.name,a=i.data;f.onChange.call(e,t,n,(function(){if(l&&"device_id"===l)return{device_name:a.name}}))},onSubmit:f.onSubmit.bind(this),onReset:f.onReset.bind(this,this.forms),loading:l}),Object(i.jsx)(v,{className:"xplr",cols:this.cols,data:n,loading:l,onRow:function(t){return e.setState({selectedKeys:t})},pag:a,onChange:function(t,n){return f.pageChange.call(e,{current:t,pageSize:n})},onSort:function(t){return f.onSort.call(e,t)}})]})}}]),n}(c.a.Component)}}]);
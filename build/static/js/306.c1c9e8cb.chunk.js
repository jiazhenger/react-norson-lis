(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[306],{545:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var a=n(5),i=n(22),l=n(23),o=n(27),c=n(25),d=n(24),r=n(0),u=n.n(r),s=window,h=s.$http,b=s.$fn,f=s.$async,m=f((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),p=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),g=Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(22)]).then(n.bind(null,143)),v=f((function(){return n.e(5).then(n.bind(null,135))})),j=f((function(){return n.e(6).then(n.bind(null,137))})),y=f((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),_=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return(e=t.call.apply(t,[this].concat(c))).state={data:[],pag:{},selectedKeys:[]},e.forms=[{label:"\u8bbe\u5907\u540d\u79f0",name:"device_id",type:"select",data:[],nameStr:"title"},{label:"\u8bbe\u5907\u578b\u53f7",name:"device_model",type:"input"},{label:"\u8d2d\u4e70\u65f6\u95f4",name:"date",type:"date-range",names:["buy_date_start_date","buy_date_end_date"],value:["2020-12-10 12:12:50","2020-12-11"]}],e.model={},e.fetch=function(t){return b.fetch.call(Object(o.a)(e),"device/index",t)},e.cols=[{type:"checkbox"},{title:"\u7f16\u53f7",field:"device_number",width:145},{title:"\u8bbe\u5907\u540d\u79f0",field:"device_name",width:150},{title:"\u8bbe\u5907\u578b\u53f7",field:"device_model",width:130},{title:"\u8bbe\u5907\u8bc6\u522b\u7801",field:"id_code",width:100,align:"tc"},{title:"\u8d2d\u4e70\u65f6\u95f4",field:"buy_date",width:150,align:"tc"},{title:"\u91c7\u8d2d\u4ef7\u683c",field:"buy_price",width:130},{title:"\u8bbe\u5907\u7c7b\u578b",field:"device_type_name",width:80},{title:"\u6240\u5c5e\u79d1\u5ba4",field:"project_name",width:80},{title:"\u8d1f\u8d23\u4eba",field:"pinyin_name",width:130},{title:"\u542f\u7528\u65f6\u95f4",field:"enabeld_date",width:150,align:"tc"},{title:"\u8054\u673a\u7c7b\u578b",field:"rel_type_name",width:100},{title:"\u8bbe\u5907\u72b6\u6001",field:"device_status_name",width:80,align:"tc"},{title:"\u64cd\u4f5c",align:"tc",width:380,render:function(t){var n=t.rows;return Object(a.jsxs)("div",{className:"plr5",children:[Object(a.jsx)(m,{label:"\u7f16\u8f91",ghost:!0,onClick:function(){b.push(Object(o.a)(e),b.getRoot().root+"laboratory-manage/equipment-list/add?id="+n.uuid)}}),Object(a.jsx)(m,{label:"\u6821\u51c6\u8ba1\u5212",ghost:!0,className:"mlr5",onClick:function(){b.push(Object(o.a)(e),b.getRoot().root+"laboratory-manage/calibration-plan?id="+n.uuid)}}),Object(a.jsx)(m,{label:"\u6821\u51c6\u8bb0\u5f55",ghost:!0,onClick:function(){b.push(Object(o.a)(e),b.getRoot().root+"laboratory-manage/calibration-record?id="+n.uuid)}}),Object(a.jsx)(m,{label:"\u9879\u76ee\u5173\u8054",ghost:!0,className:"mlr5",onClick:function(){b.push(Object(o.a)(e),b.getRoot().root+"laboratory-manage/project-related?id="+n.uuid)}}),Object(a.jsx)(m,{label:"\u8bbe\u5907\u7ef4\u62a4",ghost:!0,onClick:function(){b.push(Object(o.a)(e),b.getRoot().root+"laboratory-manage/equipment-maintain?id="+n.uuid)}})]})}}],e.ButtonGroup=function(){return[{label:"\u6dfb\u52a0 F2",code:"F2",onClick:function(){b.push(Object(o.a)(e),b.getRoot().root+"laboratory-manage/equipment-list/add")}},{label:"\u7981\u7528",ghost:!0,disabled:0===e.state.selectedKeys.length,onClick:function(){g.then((function(t){t.default({msg:"\u662f\u5426\u786e\u8ba4\u7981\u7528\uff1f",onOk:function(t){var n=e.state.selectedKeys.map((function(e){return e.uuid}));console.log(n),h.submit(null,"device/delete",{param:{uuid:n}}).then((function(n){p.then((function(e){return e.default.success("\u7981\u7528\u6210\u529f")})),e.fetch(e.model),t()}))}})}))}},{label:"\u6587\u4ef6\u5bfc\u5165",ghost:!0,onClick:function(){}}]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.dataSave("device").then((function(t){b.hasArray(t)?e.forms[0].data=t:h.pull(null,"device/select",{dataName:null}).then((function(t){t.forEach((function(e){return e.title="".concat(e.device_name,"(").concat(e.device_number,") - ").concat(e.device_model)})),e.forms[0].data=t,b.dataSave("device",t)}))})),this.fetch()}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,i=t.pullLoading,l=t.pag;return Object(a.jsxs)(v,{title:"\u8bbe\u5907\u5217\u8868",ButtonGroup:this.ButtonGroup(),children:[Object(a.jsx)(j,{data:this.forms,onChange:function(t,n,a){var i=a.name,l=a.data;b.onChange.call(e,t,n,(function(){if(i&&"device_id"===i)return{device_name:l.device_name}}))},onSubmit:b.onSubmit.bind(this),onReset:b.onReset.bind(this,this.forms),loading:i,onAdd:function(){return b.push(e,"/laboratory/laboratory-manage/equipment-list/add")}}),Object(a.jsx)(y,{className:"xplr",cols:this.cols,data:n,loading:i,onRow:function(t){return e.setState({selectedKeys:t})},pag:l,onChange:function(t,n){return b.pageChange.call(e,{current:t,pageSize:n})},onSort:function(t){return b.onSort.call(e,t)}})]})}}]),n}(u.a.Component)}}]);
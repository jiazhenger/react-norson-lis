(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[309],{553:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var l=n(5),a=n(22),i=n(23),u=n(27),o=n(25),c=n(24),r=n(0),s=n.n(r),d=window,f=d.$http,b=d.$fn,h=d.$async,m=h((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),p=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),g=Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(22)]).then(n.bind(null,143)),j=h((function(){return n.e(15).then(n.bind(null,176))})),y=h((function(){return n.e(5).then(n.bind(null,135))})),v=h((function(){return n.e(6).then(n.bind(null,137))})),O=h((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),k=[{name:"\u542f\u7528",value:"1"},{name:"\u7981\u7528",value:"0"},{name:"\u5220\u9664",value:"-1"}],x=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={data:[],pag:{},selectedKeys:[]},e.forms=[{label:"\u6a21\u677f\u7f16\u53f7",name:"lab_number"},{label:"\u6a21\u677f\u540d\u79f0",name:"lab_name"}],e.fetch=function(t){return b.fetch.call(Object(u.a)(e),"lis-lab-tag/index",t)},e.cols=[{type:"checkbox"},{title:"\u6a21\u677f\u7f16\u53f7",field:"lab_number"},{title:"\u6a21\u677f\u540d\u79f0",field:"lab_name"},{title:"\u5f53\u524d\u5b9e\u9a8c\u53f7",field:"last_code"},{title:"\u7ed3\u675f\u65f6\u95f4",field:"cycle_end",align:"tc"},{title:"\u72b6\u6001",field:"enabled",render:function(e){var t=e.rows,n=k.filter((function(e){return e.value===t.enabled}));return b.hasArray(n)?n[0].name:Object(l.jsx)(j,{value:null})}},{title:"\u63cf\u8ff0",field:"description"},{title:"\u64cd\u4f5c",align:"tc",width:150,render:function(t){var n=t.rows;return Object(l.jsx)("div",{className:"plr5",children:Object(l.jsx)(m,{label:"\u7f16\u8f91",className:"ml15",ghost:!0,onClick:function(t){b.push(Object(u.a)(e),b.getRoot().root+"laboratory-manage/expno-template/add?id="+n.uuid)}})})}}],e.ButtonGroup=function(){var t=e.state.selectedKeys.map((function(e){return e.uuid}));return[{label:"\u8bbe\u7f6e\u89c4\u5219 F2",code:"F2",onClick:function(){b.push(Object(u.a)(e),b.getRoot().root+"laboratory-manage/expno-template/add")}},{label:"\u542f\u7528",disabled:0===e.state.selectedKeys.length,onClick:function(){f.submit(null,"lis-lab-tag/on",{param:{uuid:t,enabled:"1"}}).then((function(t){p.then((function(e){return e.default.success("\u542f\u7528\u6210\u529f")})),e.fetch(e.model)}))}},{label:"\u7981\u7528",disabled:0===e.state.selectedKeys.length,onClick:function(){f.submit(null,"lis-lab-tag/off",{param:{uuid:t,enabled:"-1"}}).then((function(t){p.then((function(e){return e.default.success("\u7981\u7528\u6210\u529f")})),e.fetch(e.model)}))}},{label:"\u5220\u9664",disabled:0===e.state.selectedKeys.length,onClick:function(){g.then((function(n){n.default({msg:"\u662f\u5426\u786e\u8ba4\u5220\u9664?",onOk:function(n){f.submit(null,"lis-lab-tag/delete",{param:{uuid:t}}).then((function(t){p.then((function(e){return e.default.success("\u5220\u9664\u6210\u529f")})),e.fetch(e.model),e.setState({selectedKeys:[]}),n()}))}})}))}}]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.pullLoading,i=t.pag;return Object(l.jsxs)(y,{title:"\u5b9e\u9a8c\u53f7\u6a21\u677f",ButtonGroup:this.ButtonGroup(),children:[Object(l.jsx)(v,{data:this.forms,onChange:function(t,n){return b.onChange.call(e,t,n)},onSubmit:b.onSubmit.bind(this),onAdd:this.onAdd,onReset:b.onReset.bind(this,this.forms),loading:a}),Object(l.jsx)(O,{className:"xplr",cols:this.cols,data:n,loading:a,onRow:function(t){return e.setState({selectedKeys:t})},pag:i,onChange:function(t,n){return b.pageChange.call(e,{current:t,pageSize:n})}})]})}}]),n}(s.a.Component)}}]);
(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[108],{428:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var s=n(5),i=n(22),o=n(23),l=n(27),a=n(25),d=n(24),r=n(0),c=n.n(r),p=window,m=p.$http,u=p.$fn,h=p.$async,f=h((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),b=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),y=h((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),g=h((function(){return n.e(6).then(n.bind(null,137))})),w=function(e){Object(a.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={data:[],pag:{},selectedKeys:[]},e.forms=[{label:"\u5173\u952e\u5b57",name:"keyword"},{label:"\u6743\u9650\u4ee3\u7801",name:"perm_code"},{label:"\u6743\u9650\u7c7b\u578b",name:"perm_type",type:"select",data:[]}],e.model={},e.fetch=function(t){return u.fetch.call(Object(l.a)(e),"permission/index",t)},e.cols=[{type:"checkbox"},{title:"\u6743\u9650\u4ee3\u7801",field:"perm_code",width:150,tdCss:"wpn"},{title:"\u6743\u9650\u540d\u79f0",field:"perm_name",width:150,tdCss:"wpn"},{title:"\u6743\u9650\u7ea7\u522b",field:"level",width:60},{title:"\u6743\u9650\u7c7b\u578b",field:"type",width:60}],e.cols1=[{type:"checkbox"},{title:"\u6743\u9650\u4ee3\u7801",field:"perm_code",width:150,tdCss:"wpn"},{title:"\u6743\u9650\u540d\u79f0",field:"perm_name",width:150,tdCss:"wpn"},{title:"\u6743\u9650\u8bf4\u660e",field:"perm_desc",width:150,tdCss:"wpn"}],e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;u.getDisItem({code:900,callback:function(t){e.forms[2].data=t}});var t=this.props,n=t.type,s=t.id;"process"===n?(this.btnType="process_id",this.model={filter:"process",process_id:s}):"group"===n?(this.btnType="group",this.model={filter:"groups",group_id:s}):"position"===n?(this.btnType="position",this.model={filter:"position",pos_id:s}):"role"===n?(this.btnType="role",this.model={filter:"role",role_id:s}):"employee"===n&&(this.btnType="employee",this.model={filter:"employee",empl_id:s}),this.fetch(this.model)}},{key:"addFn",value:function(e,t,n){var s=this;m.submit(null,e,{param:t}).then((function(e){b.then((function(e){return e.default.success("\u64cd\u4f5c\u6210\u529f")})),s.fetch(s.model),n&&n()}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,i=t.pullLoading,o=t.pag,l=t.selectedKeys,a=this.props,d=a.onClose,r=a.id,c=a.type;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g,{className:"pb10",data:this.forms,onChange:function(t,n){return u.onChange.call(e,t,n)},onSubmit:u.onSubmit.bind(this),onAdd:this.onAdd,onReset:u.onReset.bind(this,this.forms),loading:i}),"process"===c&&Object(s.jsx)(y,{className:"xplr",cols:this.cols1,data:n,loading:i,onRow:function(t){e.setState({selectedKeys:t})},pag:o,onChange:function(t,n){return u.pageChange.call(e,{current:t,pageSize:n})}}),"process"!==c&&Object(s.jsx)(y,{className:"xplr",cols:this.cols,data:n,loading:i,onRow:function(t){e.setState({selectedKeys:t})},pag:o,onChange:function(t,n){return u.pageChange.call(e,{current:t,pageSize:n})}}),Object(s.jsxs)("div",{className:"tc",children:[Object(s.jsx)(f,{label:"\u53d6\u6d88",size:"middle",className:"mr15 dkm",onClick:d}),Object(s.jsx)(f,{label:"\u786e\u5b9a",ghost:!0,size:"middle",className:"mr15 dkm",onClick:function(t){var n={perm_id:l.map((function(e){return e.uuid}))};n[e.btnType]=r,"process"===c?e.addFn("fl-process-auth/addpermission",n,d):"group"===c?e.addFn("groups/addPermission",n,d):"position"===c?e.addFn("position/addPermission",n,d):"role"===c?e.addFn("role/addPermission",n,d):"employee"===c&&e.addFn("employee/addpermission",n,d)}})]})]})}}]),n}(c.a.Component)}}]);
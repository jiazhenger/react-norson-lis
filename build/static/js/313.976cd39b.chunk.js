(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[313],{570:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var r=n(5),a=n(22),s=n(23),l=n(27),c=n(25),i=n(24),d=n(0),u=n.n(d),o=window,h=o.$http,m=o.$fn,b=o.$async,j=b((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),f=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),p=b((function(){return n.e(15).then(n.bind(null,176))})),x=b((function(){return n.e(5).then(n.bind(null,135))})),O=b((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),v=[{name:"\u662f",value:"1"},{name:"\u5426",value:"0"}],y=[{name:"\u542f\u7528",value:"1"},{name:"\u7981\u7528",value:"0"}],w=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={data:[],pag:{},selectedKeys:[],id:m.query("id")},e.model={report_tpl_id:m.query("id")||""},e.form={report_name:m.query("report_name")||"--",report_num:m.query("report_num")||"--",report_en:m.query("report_en")||"--",enabled:"1"==m.query("enabled")?"\u542f\u7528":"\u7981\u7528",route_name:m.query("route_name")||"--"},e.fetch=function(t){return m.fetch.call(Object(l.a)(e),"kd-report-from-version/index",t).then((function(t){var n=m.hasArray(t)&&t.filter((function(e){return"1"===e.is_default}));m.hasArray(n)&&e.setState({selectedKeys:[n[0].uuid]})}))},e.cols=[{title:"\u9ed8\u8ba4\u6a21\u677f",field:"is_default",type:"radio",width:100},{title:"\u7248\u672c\u53f7",field:"version_num"},{title:"\u6240\u5c5e\u62a5\u544a\u5355\u6a21\u677f",field:"report_num"},{title:"\u4e0a\u4f20\u65f6\u95f4",field:"created_at"},{title:"\u662f\u5426\u9ed8\u8ba4",field:"is_default",render:function(e){var t=e.rows,n=v.filter((function(e){return e.value===t.is_default}));return m.hasArray(n)?n[0].name:Object(r.jsx)(p,{value:null})}},{title:"\u72b6\u6001",field:"enabled",render:function(e){var t=e.rows,n=y.filter((function(e){return e.value===t.enabled}));return m.hasArray(n)?n[0].name:Object(r.jsx)(p,{value:null})}}],e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.fetch(this.model)}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.pullLoading,s=t.pag,l=t.selectedKeys;return Object(r.jsx)(x,{title:"\u7248\u672c\u7ba1\u7406",children:Object(r.jsxs)("div",{className:"ex fv xplr pt10",children:[Object(r.jsx)("h6",{className:"w xmlr h40 bbor1 mb10",children:"\u6a21\u677f\u4fe1\u606f"}),Object(r.jsxs)("div",{className:"fxw",children:[Object(r.jsxs)("div",{className:"ant-row mb20",style:{width:"20%"},children:[Object(r.jsx)("span",{children:"\u6a21\u677f\u540d\u79f0\uff1a"}),Object(r.jsx)("span",{className:"b",children:decodeURI(this.form.report_name)})]}),Object(r.jsxs)("div",{className:"ant-row mb20",style:{width:"20%"},children:[Object(r.jsx)("span",{children:"\u6a21\u677f\u7f16\u53f7\uff1a"}),Object(r.jsx)("span",{className:"b",children:decodeURI(this.form.report_num)})]}),Object(r.jsxs)("div",{className:"ant-row mb20",style:{width:"20%"},children:[Object(r.jsx)("span",{children:"\u6a21\u677f\u82f1\u6587\u540d\u79f0\uff1a"}),Object(r.jsx)("span",{className:"b",children:decodeURI(this.form.report_en)})]}),Object(r.jsxs)("div",{className:"ant-row mb20",style:{width:"20%"},children:[Object(r.jsx)("span",{children:"\u72b6\u6001\uff1a"}),Object(r.jsx)("span",{className:"b",children:decodeURI(this.form.enabled)})]}),Object(r.jsxs)("div",{className:"ant-row mb20",style:{width:"20%"},children:[Object(r.jsx)("span",{children:"\u8def\u5f84\uff1a"}),Object(r.jsx)("span",{className:"b",children:decodeURI(this.form.route_name)})]})]}),Object(r.jsx)("h6",{className:"w xmlr h40 bbor1 mb10",children:"\u7248\u672c\u5217\u8868"}),Object(r.jsx)(O,{className:"xplr",cols:this.cols,data:n,loading:a,onRow:function(t){return e.setState({selectedKeys:[t.uuid]})},pag:s,idStr:"uuid",selectedKeys:l,onChange:function(t,n){return m.pageChange.call(e,{current:t,pageSize:n})}}),Object(r.jsxs)("div",{className:"mt20 tc",children:[Object(r.jsx)(j,{label:"\u4fdd\u5b58",size:"large",className:"mr15",width:90,onClick:function(){h.submit(null,"kd-report-from-version/setdefault",{param:{uuid:l[0]||""}}).then((function(t){f.then((function(e){return e.default.success("\u4fdd\u5b58\u6210\u529f")})),m.back(e)}))}}),Object(r.jsx)(j,{label:"\u8fd4\u56de",size:"large",ghost:!0,className:"mr15",width:90,onClick:function(){m.back(e)}})]})]})})}}]),n}(u.a.Component)}}]);
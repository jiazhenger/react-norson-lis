(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[75],{404:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return w}));var a=n(5),i=n(2),l=n(22),s=n(23),o=n(27),c=n(25),r=n(24),u=n(0),d=n.n(u),h=window,f=h.$http,p=h.$fn,m=h.$async,b=m((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),v=m((function(){return n.e(5).then(n.bind(null,135))})),S=m((function(){return n.e(6).then(n.bind(null,137))})),g=m((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),j=n.e(9).then(n.bind(null,144)),w=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).isEdit=!1,t.state={data:[],pag:{},selectedKeys:[],hospSelect:[],hosp_name:""},t.typeOptions=[{label:"\u6b63\u5e38",value:"91,92,94,95,96,99"},{label:"\u7ec8\u6b62",value:"93"},{label:"\u8fdf\u53d1",value:"97"},{label:"\u9000\u5355",value:"98"}],t.forms=[{label:"\u533b\u9662",name:"hosp_id",type:"select",data:[],nameStr:"name",idStr:"value"},{label:"\u533b\u9662\u7b49\u7ea7",name:"level",type:"select",data:[],nameStr:"name",idStr:"value"}],t.model={},t.fetch=function(e){return p.fetch.call(Object(o.a)(t),"bs-hospital/myHosp",Object(i.a)(Object(i.a)({},e),{},{hosp_name:t.state.hosp_name}))},t.cols=[{title:"\u533b\u9662\u7f16\u53f7",field:"hosp_code",width:120},{title:"\u533b\u9662\u540d\u79f0",field:"hosp_name",width:120,tdCss:"wpn"},{title:"\u533b\u9662\u5730\u5740",field:"address",width:120,tdCss:"wpn"},{title:"\u6240\u5c5e\u533a\u57df",field:"region_name",width:120,tdCss:"wpn"},{title:"\u533b\u9662\u7b49\u7ea7",field:"level_name",width:120},{title:"\u9001\u68c0\u65e5\u671f",field:"create_at",width:120},{title:"\u64cd\u4f5c",align:"tc",width:80,render:function(e){var n=e.rows;return Object(a.jsx)("div",{className:"plr5",children:Object(a.jsx)(b,{label:"\u67e5\u770b\u62a5\u544a",ghost:!0,onClick:function(){p.push(Object(o.a)(t),p.getRoot().root+"lgistics-page/my-hospital/report?uuid=".concat(n.uuid))}})})}}],t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;j.then((function(e){p.getCache({cache:e.default.BsHospitalSelect,name:"name",id:"value",callback:function(e){p.hasArray(e)?(t.forms[0].data=e,t.setState({hospSelect:e})):f.submit(null,"bs-hospital/select").then((function(e){t.forms[0].data=e,t.setState({hospSelect:e}),p.setCache()}))}})})),p.dataSave("dis-item-39000-data").then((function(e){p.hasArray(e)?t.forms[1].data=e:f.submit(t,"dis-item/item",{param:{dis_code:39e3}}).then((function(e){t.forms[1].data=e,p.dataSave("dis-item-39000-data",e)}))})),this.fetch(this.model)}},{key:"render",value:function(){var t=this,e=this.state,n=e.data,i=e.pullLoading,l=e.pag;return Object(a.jsxs)(v,{title:"\u6211\u7684\u533b\u9662",children:[Object(a.jsx)(S,{data:this.forms,onChange:function(e,n,a){var i=a.name;p.onChange.call(t,e,n,(function(){if(i&&"hosp_id"===i){var n=t.state.hospSelect.filter((function(t){return t.value===e.hosp_id}));t.setState({hosp_name:p.hasArray(n)?n[0].name:""})}}))},onSubmit:p.onSubmit.bind(this),onReset:p.onReset.bind(this,this.forms,(function(){t.setState({hosp_name:""})})),loading:i,init:function(e){return t.form=e}}),Object(a.jsx)(g,{className:"xplr",cols:this.cols,data:n,loading:i,onRow:function(e){return t.setState({selectedKeys:e})},pag:l,onChange:function(e,n){return p.pageChange.call(t,{current:e,pageSize:n})},onSort:function(e){return p.onSort.call(t,e)}})]})}}]),n}(d.a.Component)}}]);
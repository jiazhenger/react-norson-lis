(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[398],{378:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return k}));var l=a(11),n=a.n(l),i=a(14),s=a(5),c=a(2),r=a(22),o=a(23),d=a(27),u=a(25),p=a(24),h=a(0),m=a.n(h),b=a(124),f=window,v=f.$http,w=f.$fn,j=f.$async,y=j((function(){return Promise.resolve().then(a.bind(null,94))})),g=j((function(){return Promise.all([a.e(4),a.e(8)]).then(a.bind(null,133))})),O=j((function(){return a.e(7).then(a.bind(null,142))})),x=a.e(10).then(a.bind(null,123)),k=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(r.a)(this,a);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={data:[],pag:{},rowId:"",selectedKeys:[],submit:[{label:"\u6807\u672c\u6761\u7801",name:"old_spec_code"},{label:"\u533b\u9662\u540d\u79f0",name:"hosp_name"},{label:"\u9879\u76ee",name:"kind_name"},{label:"\u9009\u62e9\u7c7b\u578b",name:"pay_type",type:"select",data:e.typeList,nameStr:"label",idStr:"value"},{label:"\u4ef7\u683c",name:"price"},{label:"\u539f\u56e0",name:"reason",type:"textarea"},{label:"\u4e0a\u4f20\u56fe\u7247",name:"pic_path",type:"upload"}],submit1:[{label:"\u539f\u56e0",name:"reason"},{label:"\u56fe\u7247",name:"img",type:"textarea"}]},e.forms=[],e.model={},e.statusList=[],e.typeList=[{label:"\u589e\u52a0",value:"1"},{label:"\u51cf\u5c11",value:"2"}],e.options=[{label:"\u6b63\u5e38",value:"1"},{label:"\u51b2\u62b5",value:"2"}],e.typeList=[{label:"\u589e\u52a0",value:"1"},{label:"\u51cf\u5c11",value:"2"}],e.check={},e.fetch=function(t){return v.paging(Object(d.a)(e),"bill/speclists",{param:Object(c.a)(Object(c.a)({},t),{},{pageSize:e.pageSize},e.model),loading:!1})},e.cols=[{title:"\u8d26\u5355\u7f16\u53f7",field:"order_sn",width:120},{title:"\u8d26\u671f",field:"phase_str",width:120},{title:"\u81ea\u7136\u9879\u76ee",field:"parent_kind_name",width:120},{title:"\u8d26\u5355\u7c7b\u578b",field:"pay_type",width:80,render:function(t){var a=t.rows;return window.$fn.filterSelect(e.options,a.pay_type,"label","value")}},{title:"\u533b\u9662\u540d\u79f0",field:"hosp_name",width:120},{title:"\u9879\u76ee\u540d\u79f0",field:"kind_name",width:120},{title:"\u6807\u51c6\u4ef7\u683c",field:"sprice",width:80},{title:"\u6298\u6263\u7387",field:"percent",width:80},{title:"\u5b9e\u9645\u4ef7\u683c",field:"price",width:80},{title:"\u6298\u6263\u91d1\u989d",field:"perprice",width:100},{title:"\u5e10\u5355\u751f\u6210\u65f6\u95f4",field:"created_at",width:120},{title:"\u8d26\u5355\u72b6\u6001",field:"status",width:80,render:function(t){var a=t.rows;return window.$fn.filterSelect(e.statusList,a.status,"name","value")}},{title:"\u5907\u6ce8",field:"remark",width:120},{title:"\u64cd\u4f5c",field:"custom",width:180,render:function(t){var a=t.rows;return Object(s.jsxs)("div",{className:"plr5",children:[Object(s.jsx)(y,{label:"\u65b0\u589e\u8d26\u5355",ghost:!0,className:"ml15",onClick:function(){e.refs.modal.open();var t=e.state.submit;t[0].value="",t[1].value="",t[2].value="",t[4].value="",t[5].value="",t[6].value="",e.setState({submit:t})}}),Object(s.jsx)(y,{label:"\u67e5\u770b\u5176\u5b83",ghost:!0,className:"ml15",onClick:function(){e.refs.modal1.open(),v.submit(null,"bill/viewpic",{param:{uuid:a.uuid}}).then((function(t){e.check=t}))}})]})}}],e}return Object(o.a)(a,[{key:"getDataAsync",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getDisItem({code:45300,callback:function(e){t.statusList=e}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDataAsync()}},{key:"componentWillReceiveProps",value:function(e){e.rowdata.hosp_id&&(this.model.hosp_id=e.rowdata.hosp_id,this.model.spec_code=e.rowdata.spec_code,this.model.status=e.rowdata.status,this.fetch(this.model))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,l=t.pullLoading,n=t.pag,i=t.submit,r=t.rowId;t.selectedKeys;return Object(s.jsxs)("div",{children:[Object(s.jsx)(b.a,{ref:"modal",title:"\u65b0\u589e\u8d26\u5355",width:648,noFooter:!0,children:Object(s.jsx)(O,{modal:!0,data:i,onChange:function(e,t,a){a.name,a.data},onSubmit:function(t){console.log(t),v.submit(null,"bill/add",{param:Object(c.a)({uuid:r},t)}).then((function(t){x.then((function(e){return e.default.success("\u64cd\u4f5c\u6210\u529f")})),e.refs.modal.close(),e.fetch(e.model)}))},onClose:function(){return e.refs.modal.close()},init:function(t){return e.formSubmit=t}})}),Object(s.jsx)(b.a,{ref:"modal1",title:"\u67e5\u770b\u5176\u4ed6",width:648,noFooter:!0,children:Object(s.jsxs)("div",{className:"p20 r6px",children:[Object(s.jsxs)("div",{className:"pb20 pt20",children:[Object(s.jsx)("span",{className:"dk pr10",children:"\u539f\u56e0:"}),Object(s.jsx)("input",{type:"textarea",className:" bor1 h70 ",disabled:!0,style:{width:"84%"},value:this.check.reason})]}),Object(s.jsxs)("div",{className:"pb20",children:[Object(s.jsx)("span",{className:"dk pr10",children:"\u56fe\u7247:"}),Object(s.jsx)("div",{className:"dk bor1 h100 w tc",style:{width:"84%",lineHeight:"100px"},children:this.check.img||"\u6682\u65e0\u56fe\u7247"})]})]})}),Object(s.jsx)(g,{className:"xplr",cols:this.cols,data:a,loading:l,onRow:function(t){e.setState({selectedKeys:t})},pag:n,onChange:function(t,a){return w.pageChange.call(e,{current:t,pageSize:a})}})]})}}]),a}(m.a.Component)}}]);
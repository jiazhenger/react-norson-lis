(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[305],{544:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return j}));var n=a(5),i=a(2),l=a(11),r=a.n(l),u=a(14),c=a(22),s=a(23),d=a(25),m=a(24),b=a(0),o=a.n(b),p=window,f=p.$http,h=p.$fn,v=p.$async,y=Promise.all([a.e(0),a.e(2),a.e(1),a.e(14)]).then(a.bind(null,123)),_=v((function(){return a.e(5).then(a.bind(null,135))})),S=v((function(){return a.e(7).then(a.bind(null,142))})),j=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={deviceStadius:[],department:[],submit:[{label:"\u8bbe\u5907\u540d\u79f0",name:"device_name",required:!0,title:"\u8bbe\u5907\u4fe1\u606f"},{label:"\u8bbe\u5907\u7f16\u53f7",name:"device_number"},{label:"\u8bbe\u5907\u578b\u53f7",name:"device_model",required:!0},{label:"\u82f1\u6587\u540d\u79f0",name:"device_name_en"},{label:"\u8bbe\u5907\u7c7b\u578b",name:"device_type",required:!0,type:"select",data:[]},{label:"\u8054\u673a\u7c7b\u578b",name:"rel_type",required:!0,type:"select",data:[]},{label:"\u91d1\u989d",name:"buy_price",required:!0},{label:"\u6240\u5c5e\u79d1\u5ba4",name:"pgroup_id",required:!0,type:"select",data:[],idStr:"uuid"},{label:"\u8d2d\u4e70\u65e5\u671f",name:"buy_date",required:!0,type:"date-time",after:!0},{label:"\u542f\u7528\u65e5\u671f",name:"enabeld_date",required:!0,type:"date-time",after:!0},{label:"\u8bbe\u5907\u72b6\u6001",name:"device_status",required:!0,type:"select",data:[]},{label:"\u8d1f\u8d23\u4eba",name:"pinyin_name"},{label:"\u8bbe\u5907\u8bc6\u522b\u7801",name:"id_code"},{label:"\u6570\u636e\u6807\u8bc6\u7c7b\u578b",name:"data_type",required:!0,type:"select",data:[]},{label:"\u4f9b\u5e94\u5546",name:"supplier",title:"\u4f9b\u5e94\u5546\u4fe1\u606f"},{label:"\u8054\u7cfb\u4eba",name:"supp_user"},{label:"\u8054\u7cfb\u7535\u8bdd",name:"supp_phone"},{label:"\u4f9b\u5e94\u5546\u8054\u7cfb\u5730\u5740",name:"supp_address"},{label:"\u7ef4\u4fee\u8054\u7cfb\u4eba",name:"repair_man"},{label:"\u7ef4\u4fee\u7535\u8bdd",name:"repair_phone"},{label:"\u51fa\u5382\u7f16\u53f7/\u7cfb\u5217\u53f7",name:"serial_number",title:"\u5382\u5bb6\u4fe1\u606f"},{label:"\u51fa\u5382\u65e5\u671f",name:"serial_date",type:"date-time",after:!0},{label:"\u751f\u4ea7\u5382\u5bb6",name:"serial_man"},{label:"\u5382\u5bb6\u8054\u7cfb\u4eba",name:"serial_user"},{label:"\u8054\u7cfb\u7535\u8bdd",name:"serial_phone"},{label:"\u5907\u6ce8",name:"serial_memo",type:"textarea",full:!0,width:"100%"},{label:"\u6700\u4f4e\u6e7f\u5ea6",name:"min_humidity",title:"\u4f7f\u7528\u73af\u5883"},{label:"\u6700\u9ad8\u6e7f\u5ea6",name:"max_humidity"},{label:"\u6700\u4f4e\u6e29\u5ea6",name:"min_temperature"},{label:"\u6700\u9ad8\u6e29\u5ea6",name:"max_temperature"},{label:"\u529f\u7387",name:"power"},{label:"\u7535\u538b",name:"voltage"}],id:h.query("id"),model:{}},e}return Object(s.a)(a,[{key:"getDataAsync",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,a,n,i=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state,a=t.submit,n=t.id,h.getDisItem({code:43500,callback:function(e){a[4].data=e,i.setState({deviceStadius:e,submit:a})}}),h.getDisItem({code:43300,callback:function(e){a[5].data=e,i.setState({deviceStadius:e,submit:a})}}),h.getDisItem({code:200,callback:function(e){a[10].data=e,i.setState({deviceStadius:e,submit:a})}}),h.getDisItem({code:64e3,callback:function(e){a[13].data=e,i.setState({deviceStadius:e,submit:a})}}),h.dataSave("project-team").then((function(e){h.hasArray(e)?(a[7].data=e,i.setState({department:e,submit:i.state.submit})):f.pull(null,"project-team/select").then((function(e){a[7].data=e,i.setState({department:e,submit:i.state.submit}),h.dataSave("project-team",e)}))})),n&&f.submit(null,"device/info",{param:{uuid:n}}).then((function(e){h.setSubmitValues(a,e,(function(){i.setState({submit:a})}))}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDataAsync()}},{key:"render",value:function(){var e=this,t=this.state,a=t.submit,l=t.id;return Object(n.jsx)(_,{title:l?"\u7f16\u8f91\u8bbe\u5907":"\u6dfb\u52a0\u8bbe\u5907",children:Object(n.jsx)("div",{className:"ex fv xplr pt10",children:Object(n.jsx)(S,{data:a,btnSize:"large",okText:l?"\u4fee\u6539 Enter":"\u4fdd\u5b58 Enter",onSubmit:function(t){if(l){var a=Object(i.a)(Object(i.a)({},t),{},{uuid:l});f.submit(null,"device/edit",{param:a}).then((function(t){y.then((function(e){return e.default.success("\u4fee\u6539\u6210\u529f")})),h.back(e)}))}else{var n=Object(i.a)({},t);f.submit(null,"device/add",{param:n}).then((function(t){y.then((function(e){return e.default.success("\u6dfb\u52a0\u6210\u529f")})),h.back(e)}))}},onClose:function(){return h.back(e)},init:function(t){return e.form=t}})})})}}]),a}(o.a.Component)}}]);
(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[334],{1:function(t,n,e){"use strict";var o=e(2),a={hasArray:function(t){return a.isArray(t)&&t.length>0},hasObject:function(t){return a.isObject(t)&&Object.keys(t).length>0},isEmpty:function(t){return null===t||void 0===t||""===t},isValid:function(t){return!a.isEmpty(t)||0===t||!1===t}};["String","Number","Array","Object","Boolean","Function","Undefined"].forEach((function(t){return a["is"+t]=function(n){return{}.toString.call(n)==="[object "+t+"]"}}));var r=a,i=e(11),c=e.n(i),u=e(14),s=function(t){return{set:function(n,e){(function(t){var n={}.toString.call(t);return"[object Object]"===n||"[object Array]"===n})(e)&&(e=JSON.stringify(e)),t.setItem(n,e)},get:function(n){var e=t.getItem(n);if(null===e||void 0===e||""===e)return!1;try{return JSON.parse(e)}catch(o){return e}},remove:function(n){"string"===typeof n&&(n.indexOf(",")>-1?n.split(",").forEach((function(n){t.removeItem(n)})):t.removeItem(n))}}},l="db",f=function(){var t=window.indexedDB.open(l,1);return new Promise((function(n,e){t.onsuccess=function(e){var o=e.target.result.transaction(l,"readwrite").objectStore(l);n(o),t=null},t.onerror=function(t){console.log("db\u6570\u636e\u5e93\u4f7f\u7528\u5931\u8d25\uff1a"+t.srcElement.error.message),e(t.message)},t.onupgradeneeded=function(t){var n=t.target.result;n.objectStoreNames.contains(l)||n.createObjectStore(l),console.log("db \u8868\u521b\u5efa\u6210\u529f")}}))},d=function(t,n){f().then((function(e){var o=e.get(t);o.onsuccess=function(o){e.put(n,t)},o.onerror=function(t){console.log("\u5b58\u50a8\u6570\u636e\u5230 indexdb \u5931\u8d25")}}))},h=function(t){return new Promise((function(n,e){f().then((function(e){if(t){var o=e.get(t);o.onsuccess=function(t){n(t.target.result)},o.onerror=function(t){console.log("\u83b7\u53d6 indexdb \u6570\u636e\u5931\u8d25")}}}))}))},p=function(t){f().then((function(n){var e=n.delete(t);e.onsuccess=function(t){console.log("\u5220\u9664 indexdb \u6570\u636e\u6210\u529f")},e.onerror=function(t){console.log("\u5220\u9664 indexdb \u6570\u636e\u5931\u8d25")}}))},m=s(window.localStorage),g=s(window.sessionStorage),b={local:function(t,n){return t=t||"user",arguments.length<=1?g.get(t):g.set(t,n)},remove:function(t){g.remove(t||"user")},getUser:function(){var t=this.local();return this.hasObject(t)?t:{}},longSave:function(t,n){return arguments.length<=1?m.get(t):m.set(t,n)},longRemove:function(t){m.remove(t)},dataSave:function(t,n){var e=arguments;return Object(u.a)(c.a.mark((function o(){return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(e.length<=1)){o.next=6;break}return o.next=3,h(t);case 3:o.t0=o.sent,o.next=7;break;case 6:o.t0=d(t,n);case 7:return o.abrupt("return",o.t0);case 8:case"end":return o.stop()}}),o)})))()},dataRemove:function(t){p(t)}},v={query:function(t){var n=window.location.search||window.location.hash,e={};if(-1!==n.indexOf("?")){var o=n.split("?");(o=o[1].split("&")).forEach((function(t,n){var o=t.split("=");"undefined"!==o[1]&&"null"!==o[1]&&""!==o[1]&&(e[o[0]]=o[1])}))}return t?e[t]:e},getToken:function(t){var n=this.query("token"),e=this.getUser(),o=null;return n?o=n:e.token&&(o=e.token),o}},j={go:function(t){var n=t||"/login",e=window.location,o=e.port,a=e.protocol,r=e.hostname,i=e.pathname,c=80===o?"":":"+o;window.location.replace(a+"//"+r+c+i+"#"+n)},setTitle:function(t){window.document.title=t},copy:function(t){return JSON.parse(JSON.stringify(t))}},y=e(6),O={loading:function(t,n){var e=document.querySelector("#jzer-loading");e&&(t?(e.querySelector(".jzer-loading-msg").innerHTML=n||"\u6570\u636e\u52a0\u8f7d\u4e2d",e.style.display="block"):e.style.display="none")},toast:function(t,n,e){return Object(u.a)(c.a.mark((function o(){var a;return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e=e||1500,(a=document.querySelector("#jzer-toast"))&&(a.style.display="block",a.querySelector(".jzer-toast-msg").innerHTML=t,setTimeout((function(){a.style.display="none",n&&n()}),e));case 3:case"end":return o.stop()}}),o)})))()},loginTo:function(t){if(t){var n=this.local("m-skip");return!!this.local("m-skip")&&decodeURIComponent(n).replace("#","")}this.local("m-skip",encodeURIComponent(window.location.hash))},css:function(t,n){return 1===arguments.length?t||"":2===arguments.length?t||"defaultValue":void 0},setModel:function(t,n,e){return Object(u.a)(c.a.mark((function a(){var r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Object(o.a)({model:"model"},e),a.next=3,t.setState(Object(y.a)({},r.model,Object(o.a)(Object(o.a)({},t.state[r.model]),n)));case 3:return a.abrupt("return",t.state[r.model]);case 4:case"end":return a.stop()}}),a)})))()},setModels:function(t,n,e){return Object(u.a)(c.a.mark((function a(){var r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(t,n,e),r=Object(o.a)({model:"model"},e),t[r.model]=Object(o.a)(Object(o.a)({},t[r.model]),n),a.abrupt("return",t[r.model]);case 4:case"end":return a.stop()}}),a)})))()},val:function(t){return this.isValid(t)?t:"--"},nan:function(t){return isNaN(t)?"--":t},validModel:function(t){var n=this;return!this.hasObject(t)||Object.keys(t).some((function(e){return n.isArray(t[e])?!n.hasArray(t[e]):!n.isValid(t[e])}))},push:function(t,n,e){t.props.history.push(n,e)},replace:function(t,n,e){t.props.history.replace(n,e)},back:function(t){t.props.history.goBack()}},S={fetch:function(t,n,e){return window.$http.paging(this,t,{param:Object(o.a)(Object(o.a)({},n),this.model),loading:!1,callback:function(t){e&&e(t)}})},onChange:function(t,n,e,a){var r=this,i=null;for(var c in t)i=t[c];var u=e?e():null;window.$fn.setModels(this,Object(o.a)(Object(o.a)({},t),u)).then((function(t){a||!0===n&&!window.$fn.isEmpty(i)||r.fetch()}))},onSubmit:function(){window.$fn.getBody(this.model),this.fetch()},onSort:function(t){t?this.model=Object(o.a)(Object(o.a)({},this.model),t):(delete this.model.sort,delete this.model.sort_type),this.fetch()},onReset:function(t,n){var e=this;t.forEach((function(t){var n=t.name,o=t.names;o?(delete e.model[o[0]],delete e.model[o[1]]):delete e.model[n]})),n&&n(),this.fetch({})},pageChange:function(t){var n=t.current,e=t.pageSize;this.model=Object(o.a)(Object(o.a)({},this.model),{},{pageSize:e}),this.fetch({current:n})}},w=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},r),b),v),j),O),S),{},{c0:"#2cd1d2",c1:"#FF5218",menuWidth:200,getRange:function(t,n){return this.hasArray(t)?{sdate:this.format(t[0],{t:n}),edate:this.format(t[1],{t:n})}:{start:null,end:null}},getDate:function(t,n){return t?this.format(t[0],{t:n}):null},getBody:function(t){for(var n in t){var e=t[n];this.isValid(e)||delete t[n]}return t},addKey:function(t,n){var e=this,o=t.page,a=o.limit,r=o.current,i=t.items,c=a*(r-1)+1;return this.hasArray(i)&&i.forEach((function(t,o){i[o].key=c+o,e.hasObject(n)&&n.f.forEach((function(o,a){t[o+"Str"]=e.format(t[o],{t:n.t})}))})),i},addKeys:function(t,n){var e=this;this.hasArray(t)?t.forEach((function(o,a){t[a].key=a+1,e.hasObject(n)&&n.f.forEach((function(t,a){o[t+"Str"]=e.format(o[t],{t:n.t})}))})):this.hasObject(t)&&Object.keys(t).forEach((function(o,a){e.hasObject(n)&&n.f.forEach((function(o,a){t[o+"Str"]=e.format(t[o],{t:n.t})}))}))},refreshRouter:function(){window.proxy.refresh()},getRoot:function(t){var n=window.location.hash.split("/");if(t){var e="/";return n.forEach((function(n,o){o>0&&o<=t&&(e+=n+"/")})),{root:e}}return{root:"/"+n[1]+"/",munu:n[1]}},getRouter:function(t){var n=this,e=this.getRoot(),o=e.root,a=e.munu,r=JSON.parse(JSON.stringify(t)),i=null;return function t(e){e.forEach((function(e,r){i||0===r&&(e.root=o+e.root,e.to&&(e.to=o+e.to),i=!0),e.path&&(e.path=o+e.path),e.component||o||(e.component=a+"/"+e.path);var c=e.children;n.hasArray(c)&&t(c)}))}(r),r},leak:function(t){var n;return function(e){clearTimeout(n),n=setTimeout((function(){t()}),e||100)}},filterSelect:function(t,n,e,o){if(n){var a=t.filter((function(t){return String(t[o||"value"])===String(n)}));return this.hasArray(a)?a[0][e||"name"]:""}return"--"},getDisItem:function(t){var n=this,e=t.code,o=t.callback;this.dataSave("dis-item-".concat(e)).then((function(t){n.hasArray(t)?o&&o(t):window.$http.submit(null,"dis-item/item",{param:{dis_code:e},loading:!1}).then((function(t){n.dataSave("dis-item-".concat(e),t),o&&o(t)}))}))},updateCacheList:function(t){var n=this,e="";t.forEach((function(t){e=t.api.replace("api/",""),window.$http.submit(null,e).then((function(e){var o=e.items?e.items:e;n.dataSave("".concat(t.api),o)}))}))},setCache:function(){var t=this,n=[];window.$http.submit(null,"cache-api/index").then((function(e){t.dataSave("cache-list").then((function(o){t.hasArray(o)?(e.forEach((function(t){o.forEach((function(e){t.api===e.api&&new Date(t.updated_at).getTime()>new Date(e.updated_at).getTime()&&(n.push(t),e.updated_at=t.updated_at)}))})),t.dataSave("cache-list",o)):(n=e,t.dataSave("cache-list",n)),t.hasArray(n)&&t.updateCacheList(n)}))}))},getCache:function(t){var n=this,e=t.cache,o=t.name,a=t.id,r=t.callback;this.dataSave(e).then((function(t){n.hasArray(t)&&t.forEach((function(t){t.name=t[o]||t.name,t.value=t[a]||t.value})),r&&r(t)}))},setSubmitValues:function(t,n,e){t.forEach((function(t){for(var e in n)e===t.name&&(t.value=n[e])})),e&&e(t)},replaceApi:function(t){return t.replace("api/","")||""},handleSymbol:function(t){return t&&t.indexOf("+")>=0&&(t=t.replace(/\+/g,"%2B")),t&&t.indexOf("/")>=0&&(t=t.replace(/\//g,"%2F")),t},getObjectParam:function(t,n){var e=this,o={},a=function(a){var r=n[a];e.hasArray(r)?r.forEach((function(n,e){o[t+"["+a+"]["+e+"]"]=n})):o[t+"["+a+"]"]=r};for(var r in n)a(r);return o}});n.a=w},13:function(t,n){var e=function(t){return window.location.host.indexOf(t)>=0},o="http://mapi.norsonmed.com/api/",a="http://test.norsonmed.com:890/api/";e("//testt.ubzyw.com/")?o=a:e("//:preapi.ubzyw.com"),o=a,t.exports={api:o,env:false,contentType:1}},43:function(t,n,e){},44:function(t,n,e){},69:function(t,n,e){"use strict";e.r(n);var o=e(5),a=(e(43),e(44),e(1)),r=e(6),i=e(2),c=e(18),u=e.n(c),s=e(13),l=e.n(s),f=function(t,n){l.a.env&&console.log(t,n)},d=function(t,n){if(!a.a.hasObject(t))return"";var e=t,o="";for(var r in e){var i=e[r];a.a.hasArray(i)?i.forEach((function(t,n){if(a.a.isObject(t))for(var e in t)o+=r+"["+n+"]["+e+"]="+t[e]+"&";else o+=r+"["+n+"]="+t+"&"})):(a.a.isValid(e[r])||""===e[r])&&(o+=r+"="+e[r]+"&")}return"&"===o.charAt(o.length-1)&&(o=o.slice(0,o.length-1)),o=n?o:"?"+o,encodeURI(o)},h=function(t,n){if(t){var e=t[n];return e=a.a.isArray(e)?[]:a.a.isObject(e)?{}:"",a.a.isValid(n)&&(t[n]=e),e}},p=function(t,n,e,o){var r=o||{},i=-1!==t.indexOf("http")?t:l.a.api,c=function(t){if(a.a.isFunction(t))return t();if(a.a.hasObject(t)){for(var n in t){var e=t[n];a.a.isValid(e)||(e="")}return t}return t}(n);c=1===r.type?d(c,!0):c;var s,h=d(c),p=function(t){var n=t.type,e=t.token,o=t.api;t.upload&&(n=2);var r=["application/json;charset=utf-8","application/x-www-form-urlencoded","multipart/form-data"][a.a.isValid(n)?n:l.a.contentType];return{baseURL:o,headers:!1===e?{"Content-Type":r}:{"Content-Type":r,Authorization:a.a.getToken()},timeout:3e4}}({type:r.type,upload:r.upload,token:r.token,api:i});return a.a.isFunction(r.onStart)&&r.onStart(),"get"===e?(s=u.a.get(t+h,p),f("%c"+e+" === "+i+t+h,"color:blue")):(s=u.a.post(t,c,p),f("%c"+e+" === "+i+t+JSON.stringify(c),"color:blue")),new Promise((function(n,e){s.then((function(o){var i=o.data,c=1*i.status;1===c?(n(i.data),f(t+"===",i.data)):-10404417===c||-10404413===c?(a.a.toast(i.msg),a.a.remove(),a.a.loginTo(),setTimeout((function(){return a.a.go("/login")}))):(e(i),r.onMsg?a.a.isFunction(r.onMsg)&&r.onMsg(i):a.a.toast(i.msg,r.onError),a.a.isFunction(r.onFail)&&r.onFail(i),f(t+"===",i)),a.a.isFunction(r.onEnd)&&r.onEnd(i),a.a.isFunction(r.onSuccess)&&r.onSuccess(i)}),(function(t){r.noError||a.a.toast("\u670d\u52a1\u5668\u6216\u7f51\u7edc\u51fa\u9519"),a.a.isFunction(r.onNet)&&r.onNet(),a.a.isFunction(r.onError)&&r.onError(),a.a.isFunction(r.onEnd)&&r.onEnd()}))}))},m=function(t,n,e){var o,c=Object(i.a)({dataName:"data",loading:!1,param:{},pullLoading:"pullLoading",loadingText:"\u6570\u636e\u52a0\u8f7d\u4e2d..."},e);t&&a.a.isValid(c.isFirst)?t.setState((o={},Object(r.a)(o,c.pullLoading,!0),Object(r.a)(o,"isFirst",c.isFirst),o)):t&&t.setState(Object(r.a)({},c.pullLoading,!0));return c.isFirst||c.loading&&a.a.loading(!0,c.loadingText),new Promise((function(e,o){var i,u,s;(i=n,u=c.param,s={onStart:function(){c.onStart&&c.onStart(!0)},onEnd:function(){t&&t.setState(Object(r.a)({},c.pullLoading,!1)),c.loading&&a.a.loading(!1),c.onEnd&&c.onEnd(!1)},onMsg:c.onMsg&&function(t){a.a.isFunction(c.onMsg)&&c.onMsg(t)},noError:c.noError,onError:function(){h(t,c.dataName),c.onError&&c.onError(),c.loading||a.a.loading(!1)},token:c.token},p(i,u,"get",s)).then((function(n){if(a.a.isValid(n))a.a.isFunction(c.onSuccess)&&(n=c.onSuccess(n)),a.a.isValid(c.dataName)&&t&&t.setState(Object(r.a)({},c.dataName,n)),e(n);else{var o=h(t,c.dataName);e(o)}}))}))},g={submit:function(t,n,e){var o=Object(i.a)({param:{},loadingText:"\u6570\u636e\u63d0\u4ea4\u4e2d...",successText:"",succeedFn:null,errorText:"",submitLoading:"submitLoading",loading:!0,runFirst:!0,type:l.a.contentType},e);t&&t.setState(Object(r.a)({},o.submitLoading,!0)),o.loading&&a.a.loading(!0,o.loadingText);var c=function(){t&&(o.replace&&t.props.history.replace(o.replace),o.push&&t.props.history.push(o.push)),o.onSuccess&&o.onSuccess()};return new Promise((function(e,i){var u,s,l;(u=n,s=o.param,l={onStart:function(){o.onStart&&o.onStart(!0)},onEnd:function(){t&&t.setState(Object(r.a)({},o.submitLoading,!1)),o.loading&&a.a.loading(!1),o.onEnd&&o.onEnd(!1)},onMsg:o.onMsg&&function(t){a.a.isFunction(o.onMsg)&&o.onMsg(t)},noError:o.noError,onError:o.onError,upload:o.upload,token:o.token,isBody:o.isBody,type:o.type},p(u,s,"post",l)).then((function(t){e(t),o.successText?o.runFirst?(a.a.toast(o.successText),c()):a.a.toast(o.successText,c):c()}),(function(n){i(n),o.myToast&&t.refs.toast&&t.refs.toast.open({text:n.info})}))}))},pull:m,paging:function(t,n,e){var o={dataName:"data",loading:!0,param:{},pagingLoading:"pullLoading",resetData:!1,pag:"pag"};Object.assign(o,e||{});var c=o.param||{},u=c.current,s=c.pageSize,l=Object(i.a)({page:u||1,limit:s||20},o.param);return delete l.pageSize,delete l.total,delete l.current,new Promise((function(e){m(t,n,{onStart:function(){o.onStart&&o.onStart(!0)},onEnd:function(){o.onStart&&o.onEnd(!0)},onError:o.onError,loading:o.loading,param:l,pullLoading:o.pagingLoading,resetData:!0,dataName:null}).then((function(n){var c=n.items||n;t.setState(Object(r.a)({},o.pag,Object(i.a)(Object(i.a)({},t.state[o.pag]),{},{current:+n.current,total:+n.total_items,totalPage:+n.total_pages,pageSize:+n.limit})),(function(){a.a.isValid(o.dataName)&&(t.setState(Object(r.a)({},o.dataName,c)),e(c))})),o.callback&&o.callback(n)}))}))}},b=e(22),v=e(23),j=e(25),y=e(24),O=e(0),S=function(t){return function(n){Object(j.a)(a,n);var e=Object(y.a)(a);function a(){var t;Object(b.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={component:null},t}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var n=this;t().then((function(t){n.setState({component:t.default})}))}},{key:"render",value:function(){var t=this.state.component;return t?Object(o.jsx)(t,Object(i.a)({},this.props)):null}}]),a}(O.Component)};window.$fn=a.a,window.$http=g,window.$config=l.a,window.$async=S;var w=e(21),E=e.n(w),x=function(t){t&&t instanceof Function&&e.e(408).then(e.bind(null,640)).then((function(n){var e=n.getCLS,o=n.getFID,a=n.getFCP,r=n.getLCP,i=n.getTTFB;e(t),o(t),a(t),r(t),i(t)}))},k=e(28),F=window.$async,T=F((function(){return e.e(373).then(e.bind(null,641))})),A=F((function(){return Promise.all([e.e(2),e.e(1),e.e(342),e.e(389)]).then(e.bind(null,642))})),N=F((function(){return e.e(382).then(e.bind(null,643))})),L=F((function(){return e.e(381).then(e.bind(null,644))})),M=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(A,{children:Object(o.jsx)(k.HashRouter,{children:Object(o.jsx)(T,{})})}),Object(o.jsx)(N,{}),Object(o.jsx)(L,{})]})};E.a.render(Object(o.jsx)(M,{}),document.querySelector("#app-root")),document.body.removeChild(document.querySelector("#app-loading")),x()}},[[69,335,340]]]);
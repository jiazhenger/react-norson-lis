(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[250],{290:function(t,e,a){"use strict";var n=a(2),c=a(1),l=function(t){return(t=t.toString())[1]?t:"0"+t},o=function(t,e){return t.map(l).join(e)};e.a={full:function(t){var e=new Date(t);return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()}},format:function(t,e){var a=Object(n.a)({s:"-",l:"en",t:"ymd"},e),l=null,i=null;if(i=c.a.isString(t)?this.getTime(t):t instanceof Date?t.getTime():t){var s=this.full(i);switch(a.t){case"full":l=o([s.year,s.month,s.day],a.s)+" "+o([s.h,s.m,s.s],":");break;case"ymd-hm":l=o([s.year,s.month,s.day],a.s)+" "+o([s.h,s.m],":")+":00";break;case"ymd":l="zh"===a.l?s.year+"\u5e74"+s.month+"\u6708"+s.day+"\u65e5":o([s.year,s.month,s.day],a.s);break;case"hms":l=o([s.h,s.m,s.s],":");break;case"hm":l=o([s.h,s.m],":")}}return l},getTime:function(t){return t?new Date(t).getTime():(new Date).getTime()},customDate:function(t,e,a){var n=new Date,c=n.getFullYear(),l=n.getMonth()+1>9?n.getMonth()+1:"0".concat(n.getMonth()+1),o=n.getDate()>9?n.getDate():"0".concat(n.getDate()),i=n.getHours()>9?n.getHours():"0".concat(n.getHours()),s=n.getMinutes()>9?n.getMinutes():"0".concat(n.getMinutes()),r=n.getSeconds()>9?n.getSeconds():"0".concat(n.getSeconds()),d="";if(1===t){var u=o-t>9?o-t:"0".concat(o-t);d=a?"".concat(c,"-").concat(l,"-").concat(u," ").concat(a):"start"===e?"".concat(c,"-").concat(l,"-").concat(u," 00:00:00"):"end"===e?"".concat(c,"-").concat(l,"-").concat(u," 23:59:59"):"".concat(c,"-").concat(l,"-").concat(u," ").concat(i,":").concat(s,":").concat(r)}else d=2===t?"date"===e?"".concat(c,"-").concat(l,"-01"):"".concat(c,"-").concat(l,"-01 00:00:00"):3===t?"date"===e?"".concat(c,"-").concat(l-1,"-").concat(o):"".concat(c,"-").concat(l-1,"-").concat(o," 00:00:00"):"current-date"===t?"".concat(c,"-").concat(l,"-").concat(o):"".concat(c,"-").concat(l,"-").concat(o," ").concat(i,":").concat(s,":").concat(r);return d}}},539:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return S}));var n=a(5),c=a(22),l=a(23),o=a(27),i=a(25),s=a(24),r=a(0),d=a.n(r),u=a(290),h=window,m=h.$http,f=h.$fn,b=h.$async,g=Promise.all([a.e(0),a.e(2),a.e(1),a.e(14)]).then(a.bind(null,123)),p=Promise.all([a.e(0),a.e(2),a.e(1),a.e(3),a.e(22)]).then(a.bind(null,143)),y=b((function(){return a.e(5).then(a.bind(null,135))})),_=a.e(9).then(a.bind(null,144)),w=b((function(){return a.e(6).then(a.bind(null,137))})),v=b((function(){return Promise.all([a.e(0),a.e(1),a.e(4),a.e(11)]).then(a.bind(null,133))})),k=b((function(){return Promise.all([a.e(0),a.e(2),a.e(1),a.e(3),a.e(83)]).then(a.bind(null,435))})),S=function(t){Object(i.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(t=e.call.apply(e,[this].concat(l))).state={data:[],pag:{},selectedKeys:[],data1:{},showmodel:""},t.billStatusOption=[{label:"\u8d22\u52a1\u5f85\u5ba1\u6838",value:"45301"},{label:"\u8d22\u52a1\u5f85\u7ed3\u7b97",value:"45302"},{label:"\u8d22\u52a1\u5df2\u7ed3\u7b97",value:"45303"},{label:"\u5df2\u4f5c\u5e9f",value:"45304"},{label:"\u4e1a\u52a1\u5458\u5f85\u5ba1\u6838",value:"45305"}],t.payTypeOptions=[{label:"\u5168\u90e8",value:""},{label:"\u6b63\u5e38",value:"1"},{label:"\u51b2\u62b5",value:"2"}],t.forms=[{label:"\u5e10\u5355\u751f\u6210\u65f6\u95f4",name:"date",names:["start_at","end_at"],type:"date-range"},{label:"\u6761\u7801\u53f7",name:"spec_code"},{label:"\u5ba2\u6237\u540d\u79f0",name:"hosp_id",type:"select",data:[]},{label:"\u5b9e\u9a8c\u79d1\u5ba4",name:"project_parent_id",type:"select",data:[]},{label:"\u533a\u57df",name:"region_id",type:"select",data:[]},{label:"\u4e1a\u52a1\u5458",name:"salesman_id",type:"select",data:[]},{label:"\u59d3\u540d",name:"patient_name"},{label:"\u81ea\u7136\u9879\u76ee",name:"parent_kind_id",type:"select",data:[]},{label:"\u72b6\u6001",name:"status",type:"select",data:t.billStatusOption,nameStr:"label",idStr:"value"}],t.model={start_at:u.a.customDate(3,"date"),end_at:u.a.customDate("current-date"),hosp_id:"",status:"",region_id:"",project_parent_id:"",salesman_id:""},t.fetch=function(e){return f.fetch.call(Object(o.a)(t),"bill-st/parentkind",e)},t.cols=[{title:"\u5ba2\u6237\u540d\u79f0",field:"hosp_name",width:100},{title:"\u63a5\u6536\u65f6\u95f4",field:"check_time",width:160},{title:"\u6761\u7801\u53f7",field:"old_spec_code",width:100},{title:"\u81ea\u7136\u9879\u76ee",field:"parent_kind_name",width:160},{title:"\u603b\u4ef7",field:"sum_sprice",width:100},{title:"\u603b\u5b9e\u9645\u4ef7\u683c",field:"sum_price",width:100},{title:"\u59d3\u540d",field:"patient_name",width:80},{title:"\u6027\u522b",field:"sex_name",width:80},{title:"\u5e74\u9f84",field:"age",width:80},{title:"\u9001\u68c0\u79d1\u5ba4",field:"department_name",width:80},{title:"\u533b\u751f",field:"doctor",width:100},{title:"\u5b9e\u9a8c\u79d1\u5ba4",field:"project_parent_name",width:100},{title:"\u5f00\u7968\u5355\u4f4d",field:"organization_name",width:160},{title:"\u5f00\u7968\u5355\u4f4d\u7f16\u7801",field:"organization_code",width:170},{title:"\u4e1a\u52a1\u5458",field:"salesman_user",width:100},{title:"\u4e1a\u52a1\u5458\u7f16\u7801",field:"salesman_code",width:100},{title:"\u533a\u57df",field:"region_name",width:100},{title:"\u533a\u57df\u7f16\u7801",field:"region_num",width:100}],t.ButtonGroup=function(){return[{label:"\u5bfc\u51faF1",code:"F1",onClick:function(){p.then((function(e){e.default({msg:"\u662f\u5426\u5bfc\u51fa\u81ea\u7136\u9879\u76ee?",onOk:function(e){t.model.export=1,m.submit(null,"bill-st/parentkind",{param:t.model}).then((function(t){g.then((function(t){return t.default.success("\u5bfc\u51fa\u6210\u529f")})),window.location.href=t.url,e()}))}})}))}}]},t}return Object(l.a)(a,[{key:"getDataAsync",value:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,n=t.getDay();a<10&&(a="0"+a),n<10&&(n="0"+n),console.log(t),this.model.start_at=e+"-"+a+"-"+n,this.forms[0].names[0]=this.model.start_at,console.log(this.forms[0].names)}},{key:"componentDidMount",value:function(){var t=this;f.dataSave("bill-phase-select-data").then((function(e){f.hasArray(e)?t.forms[0].data=e:m.pull(null,"bill-phase/select",{dataName:null}).then((function(e){t.forms[0].data=e.items,f.dataSave("bill-phase-select-data",e)}))})),_.then((function(e){var a=e.default;f.getCache({cache:a.BsHospitalSelect,callback:function(e){f.hasArray(e)?t.forms[2].data=e:m.submit(null,"bs-hospital/select").then((function(e){t.forms[2].data=e,f.setCache()}))}}),f.getCache({cache:a.ProjectTeamSelect,callback:function(e){f.hasArray(e)?t.forms[3].data=e:m.submit(null,"project-team/select").then((function(e){t.forms[3].data=e,f.setCache()}))}}),f.getCache({cache:a.bsareaSelect,callback:function(e){f.hasArray(e)?t.forms[4].data=e:m.submit(null,"bs-area/select").then((function(e){t.forms[4].data=e,f.setCache()}))}}),f.getCache({cache:a.bssalesmanSelect,callback:function(e){f.hasArray(e)?t.forms[5].data=e:m.submit(null,"bs-salesman/select").then((function(e){t.forms[5].data=e,f.setCache()}))}}),f.getCache({cache:a.kindItemSelect,callback:function(e){f.hasArray(e)?t.forms[7].data=e:m.submit(null,"kd-market/select").then((function(e){t.forms[7].data=e,f.setCache()}))}})})),this.getDataAsync(),this.fetch()}},{key:"render",value:function(){var t=this,e=this.state,a=e.data,c=e.data1,l=e.pullLoading,o=e.pag;e.submit,e.showmodel,e.selectedKeys;return Object(n.jsxs)(y,{title:"\u81ea\u7136\u9879\u76ee\u7edf\u8ba1",ButtonGroup:this.ButtonGroup(),children:[Object(n.jsx)(w,{data:this.forms,onChange:function(e,a){return f.onChange.call(t,e,a)},onSubmit:f.onSubmit.bind(this),onReset:f.onReset.bind(this,this.forms),loading:l,init:function(t){t.setFieldsValue({date:[u.a.customDate(2,"date"),u.a.customDate("current-date")]})}}),Object(n.jsx)(v,{className:"xplr",cols:this.cols,data:a,loading:l,onRow:function(e){console.log(e),t.setState({data1:e}),t.setState({selectedKeys:e})},pag:o,onChange:function(e,a){return f.pageChange.call(t,{current:e,pageSize:a})},onSort:function(e){return f.onSort.call(t,e)}}),Object(n.jsx)(k,{className:"fv rel ex xplr",model:this.model,rowdata:c||[]})]})}}]),a}(d.a.Component)}}]);
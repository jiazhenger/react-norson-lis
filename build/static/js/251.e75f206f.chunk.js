(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[251],{138:function(t,e,n){"use strict";var a=Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(22)]).then(n.bind(null,143)),c=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),o=window.$fn;e.a={interfaceConfirm:function(t,e,n,o){e?a.then((function(a){a.default({msg:"\u662f\u5426\u786e\u8ba4".concat(e,"\uff1f"),onOk:function(a){window.$http.submit(null,t,{param:n}).then((function(t){c.then((function(t){return t.default.success("".concat(e,"\u6210\u529f"))})),o(),a()}))}})})):window.$http.submit(null,t,{param:n}).then((function(t){c.then((function(t){return t.default.success("".concat(e,"\u6210\u529f"))})),o()}))},sysTime:function(t,e){var n=o.getUser(),a="9";a=o.hasObject(n)?e||(n.timeline_node?n.timeline_node:"9"):e||"9";var c=parseInt(a)>9?"".concat(a,":00:00"):"0".concat(a,":00:00"),i=new Date;i.getHours()<Number(a)?1===t&&i.setTime(i.getTime()-864e5):2===t&&i.setTime(i.getTime()+864e5);var r=i.getFullYear(),s=i.getMonth()+1>9?i.getMonth()+1:"0".concat(i.getMonth()+1),u=i.getDate()>9?i.getDate():"0".concat(i.getDate()),l=i.getHours()>9?i.getHours():"0".concat(i.getHours()),d=i.getMinutes()>9?i.getMinutes():"0".concat(i.getMinutes()),g=i.getSeconds()>9?i.getSeconds():"0".concat(i.getSeconds());return c?"".concat(r,"-").concat(s,"-").concat(u," ").concat(c):"".concat(r,"-").concat(s,"-").concat(u," ").concat(l,":").concat(d,":").concat(g)},intervalTime:function(t,e){var n=new Date,a=n;t&&(a=new Date(n.getTime()-24*t*60*60*1e3));var c=a.getFullYear(),o=a.getMonth()+1>9?a.getMonth()+1:"0".concat(a.getMonth()+1),i=a.getDate()>9?a.getDate():"0".concat(a.getDate()),r=a.getHours()>9?a.getHours():"0".concat(a.getHours()),s=a.getMinutes()>9?a.getMinutes():"0".concat(a.getMinutes()),u=a.getSeconds()>9?a.getSeconds():"0".concat(a.getSeconds());return e?"".concat(c,"-").concat(o,"-").concat(i," ").concat(e):"".concat(c,"-").concat(o,"-").concat(i," ").concat(r,":").concat(s,":").concat(u)},img_domain_url:function(t){if(t){var e=o.local("user");return e&&Object.keys(e).length>0&&e.img_domain?e.img_domain+t:t}return""},exportExcel:function(t){var e=t.api,n=t.apiType,a=t.param,c=t.cb;window.$http[n||"pull"](null,e,a).then((function(t){window.location.href=t.url,c&&c()}))},switchFlag:function(t){return t?1:0},flagSwitch:function(t){return"1"===String(t)}}},466:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return S}));var a=n(5),c=n(2),o=n(22),i=n(23),r=n(27),s=n(25),u=n(24),l=n(0),d=n.n(l),g=n(138),m=window,h=m.$http,f=m.$fn,p=m.$async,b=p((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),w=p((function(){return n.e(5).then(n.bind(null,135))})),j=p((function(){return n.e(6).then(n.bind(null,137))})),v=p((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),O=p((function(){return Promise.all([n.e(1),n.e(223)]).then(n.bind(null,452))})),S=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return(t=e.call.apply(e,[this].concat(s))).state={data:[],pag:{},selectedKeys:[],imgModel:!1,rows:{}},t.forms=[{label:"\u9009\u62e9\u72b6\u6001",name:"status",type:"select",data:[],nameStr:"name",idStr:"value"}],t.model={},t.fetch=function(e){return h.paging(Object(r.a)(t),"app-upload-pic/index",{param:Object(c.a)(Object(c.a)(Object(c.a)({},e),{},{pageSize:t.pageSize},t.model),{},{entry_type:"pic"}),loading:!1})},t.cols=[{title:"\u6761\u7801\u53f7",field:"spec_code",width:120},{title:"\u56fe\u7247\u7f16\u7801",field:"pic_name",width:320},{title:"\u4e0a\u4f20\u65f6\u95f4",field:"created_at",width:150},{title:"\u4e0a\u4f20\u4eba",field:"operator_name",width:100},{title:"\u72b6\u6001",field:"pic_status_name",width:80},{title:"\u5ba1\u6838\u5907\u6ce8",field:"audit_remark",width:120},{title:"\u64cd\u4f5c",align:"tc",width:150,render:function(e){var n=e.rows;return Object(a.jsxs)("div",{className:"plr5 fx",children:[Object(a.jsx)(b,{label:"\u67e5\u770b",ghost:!0,className:"mlr5",onClick:function(){return t.setState({imgModel:!0,rows:n})}}),"43703"!==String(n.pic_status)&&Object(a.jsx)(b,{label:"\u5220\u9664",ghost:!0,className:"mlr5",onClick:function(){var e={uuid:n.uuid};g.a.interfaceConfirm("app-upload-pic/del","\u5220\u9664",e,(function(){t.fetch()}))}})]})}}],t.ButtonGroup=function(){return[{label:"\u56fe\u7247\u4e0a\u4f20 F2",code:"F2",onClick:function(){f.push(Object(r.a)(t),f.getRoot(2).root+"processed-image/upload")}},{label:"\u6761\u7801\u5173\u8054",onClick:function(){f.push(Object(r.a)(t),f.getRoot(2).root+"processed-image/relevance")}},{label:"\u56fe\u7247\u5ba1\u6838",onClick:function(){f.push(Object(r.a)(t),f.getRoot(2).root+"processed-image/audit")}}]},t}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this;f.dataSave("dis-item-43700-data").then((function(e){f.hasArray(e)?t.forms[0].data=e:h.submit(null,"dis-item/item",{param:{dis_code:43700},loading:!1}).then((function(e){t.forms[0].data=e,f.dataSave("dis-item-43700-data",e)}))})),this.fetch()}},{key:"render",value:function(){var t=this,e=this.state,n=e.data,c=e.pullLoading,o=e.pag;return Object(a.jsxs)(w,{title:"\u7533\u8bf7\u5355\u4e0a\u4f20",ButtonGroup:this.ButtonGroup(),children:[Object(a.jsx)(j,{data:this.forms,onChange:function(e,n){return f.onChange.call(t,e,n)},onSubmit:f.onSubmit.bind(this),onReset:f.onReset.bind(this,this.forms),loading:c,onAdd:function(){return f.push(t,f.getRoot().root+"specimen-manage/processed-image/upload")}}),Object(a.jsx)(v,{className:"xplr",cols:this.cols,data:n,loading:c,onRow:function(e){return t.setState({selectedKeys:e})},pag:o,onChange:function(e,n){return f.pageChange.call(t,{current:e,pageSize:n})}}),this.state.imgModel&&Object(a.jsx)("div",{className:"view-image full",children:Object(a.jsx)(O,{src:this.state.rows.pic_path,onClose:function(){return t.setState({imgModel:!1})}})})]})}}]),n}(d.a.Component)}}]);
(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[400],{384:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var a=n(5),o=n(2),i=n(22),l=n(23),s=n(27),r=n(25),c=n(24),d=n(0),u=n.n(d),m=n(124),f=n(138),h=window,p=h.$fn,b=h.$async,y=b((function(){return Promise.resolve().then(n.bind(null,94))})),j=n.e(10).then(n.bind(null,123)),w=b((function(){return n.e(6).then(n.bind(null,137))})),_=b((function(){return n.e(7).then(n.bind(null,142))})),g=b((function(){return Promise.all([n.e(4),n.e(8)]).then(n.bind(null,133))})),O=b((function(){return n.e(70).then(n.bind(null,358))})),x=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,l=new Array(o),r=0;r<o;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={data:[],pag:{},selectedKeys:[],type:"",rows:{},submit:[{label:"\u5f00\u59cb\u65f6\u95f4",name:"start_at",type:"date-time",after:!0,full:!0,width:"100%",required:!0},{label:"\u7ed3\u675f\u65f6\u95f4",name:"end_at",type:"date-time",after:!0,full:!0,width:"100%",required:!0}]},e.forms=[{label:"\u5355\u4f4d\u540d\u79f0",name:"company_name"},{label:"\u5355\u4f4d\u7f16\u7801",name:"company_code"},{label:"\u5355\u4f4d\u7b80\u79f0",name:"company_short_name"},{label:"\u4e3b\u68c0\u5b9e\u9a8c\u5ba4",name:"company_laboratory"}],e.model={start_at:f.a.sysTime(1,"9"),end_at:f.a.sysTime(2,"9")},e.fetch=function(t){return p.fetch.call(Object(s.a)(e),"lis-outsourcing-company/index",t)},e.cols=[{type:"checkbox"},{title:"\u5355\u4f4d\u540d\u79f0",field:"company_name",width:145},{title:"\u5355\u4f4d\u7f16\u7801",field:"company_code",width:150},{title:"\u5355\u4f4d\u7b80\u79f0",field:"company_short_name",width:130},{title:"\u8054\u7cfb\u4eba",field:"company_employee",width:100},{title:"\u8054\u7cfb\u7535\u8bdd",field:"company_mobile",width:120},{title:"\u5730\u5740",field:"company_address",width:300},{title:"\u4e3b\u68c0\u5b9e\u9a8c\u5ba4",field:"company_laboratory",width:150},{title:"\u5bfc\u51fa\u6a21\u677f",field:"model_name",width:150},{title:"\u64cd\u4f5c",align:"tc",width:150,render:function(t){var n=t.rows;return Object(a.jsxs)("div",{className:"plr5",children:[Object(a.jsx)(y,{label:"\u7f16\u8f91",ghost:!0,onClick:function(){e.refs.modal.open(),e.setState({type:"edit",rows:n})}}),Object(a.jsx)(y,{label:"\u5bfc\u51fa",ghost:!0,className:"mlr5",onClick:function(){e.refs.modal1.open(),e.rows=n}})]})}}],e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.onRef(this),this.fetchFn()}},{key:"fetchFn",value:function(){this.fetch(this.model),this.setState({selectedKeys:[]})}},{key:"selectedUuids",value:function(){return this.state.selectedKeys.map((function(e){return e.uuid}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,i=t.pullLoading,l=t.pag,s=t.rows,r=t.type,c=t.submit;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(w,{data:this.forms,onChange:function(t,n){return p.onChange.call(e,t,n)},onSubmit:p.onSubmit.bind(this),onAdd:this.onAdd,onReset:p.onReset.bind(this,this.forms),loading:i}),Object(a.jsx)(g,{className:"xplr",cols:this.cols,data:n,loading:i,onRow:function(t){return e.setState({selectedKeys:t})},pag:l,onChange:function(t,n){return p.pageChange.call(e,{current:t,pageSize:n})}}),Object(a.jsx)(m.a,{ref:"modal",title:"\u7f16\u8f91",width:648,noFooter:!0,children:Object(a.jsx)(O,{type:r,rows:s,onClose:function(){return e.refs.modal.close()},fetch:function(){e.fetchFn()}})}),Object(a.jsx)(m.a,{ref:"modal1",title:"\u5bfc\u51fa\u5916\u5305\u5355\u4f4d\u6570\u636e",width:500,noFooter:!0,children:Object(a.jsx)(_,{modal:!0,data:c,onSubmit:function(t){var n=Object(o.a)(Object(o.a)({},t),{},{uuid:e.rows.uuid});console.log(n),f.a.exportExcel({api:"lis-outsourcing-company/exportData",apiType:"submit",param:{param:n},cb:function(){j.then((function(e){return e.default.success("\u5bfc\u51fa\u6210\u529f")})),e.refs.modal1.close(),e.fetch(e.model)}})},onClose:function(){return e.refs.modal1.close()},init:function(t){return t.setFieldsValue({start_at:e.model.start_at,end_at:e.model.end_at})}})})]})}}]),n}(u.a.Component)}}]);
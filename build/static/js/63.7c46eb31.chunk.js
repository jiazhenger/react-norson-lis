(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[63],{365:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var n=a(5),i=a(2),s=a(22),o=a(23),l=a(25),r=a(24),u=a(0),c=a.n(u),m=window,d=m.$http,p=m.$fn,b=m.$async,h=Promise.all([a.e(0),a.e(2),a.e(1),a.e(14)]).then(a.bind(null,123)),f=b((function(){return a.e(7).then(a.bind(null,142))})),v=a.e(9).then(a.bind(null,144)),y=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).item_typeOptions=[{label:"\u52a0\u505a",value:"1"},{label:"\u51cf\u505a",value:"2"}],e.state={keys:0,submit:[{label:"\u6807\u672c\u6761\u7801",name:"spec_code",required:!0},{label:"\u52a0\u51cf\u9879\u7c7b\u578b",name:"item_type",type:"select",data:e.item_typeOptions,nameStr:"label",idStr:"value",required:!0},{label:"\u59d3\u540d",name:"patient_name",required:!0},{label:"\u6027\u522b",name:"sex",type:"select",data:[],nameStr:"name",idStr:"value"},{label:"\u9879\u76ee",name:"kind_id",type:"select",data:[],nameStr:"name",idStr:"value",required:!0},{label:"\u65f6\u95f4",name:"op_time",type:"date-time"},{label:"\u5c97\u4f4d",name:"project_name",type:"select",data:[],nameStr:"name",idStr:"value"},{label:"\u5907\u6ce8\u8bf4\u660e",name:"remark",type:"textarea",full:!0,width:"100%"},{label:"\u56fe\u7247",name:"img",type:"upload",params:{modular:130}}]},e.model={},e.changeInfo=function(t){console.log("\u52a0\u51cf\u9879\u8d4b\u503c"),e.clears();var a=e.state.submit;t.type?(a[0].value=t.rows.spec_code||"",a[1].value=t.rows.item_type||"",a[2].value=t.rows.patient_name||"",a[3].value=t.rows.sex||"",a[4].value=t.rows.kind_id||"",a[5].value=t.rows.op_time||"",a[6].value=t.rows.project_name||"",a[7].value=t.rows.remark||"",a[8].value=t.rows.img||""):(a[0].value=t.rows.spec_code||"",a[2].value=t.rows.patient_name||"",a[3].value=t.rows.sex||""),e.setState({submit:a})},e.submits=function(){console.log("\u52a0\u51cf\u9879\u63d0\u4ea4"),e.form.submit()},e.clears=function(){console.log("\u52a0\u51cf\u9879\u6e05\u7a7a");var t=e.state.submit;t.forEach((function(t){(e.props.type||"spec_code"!==t.name)&&(t.value="")})),e.setState({submit:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this);var t=this.state.submit;p.dataSave("dis-item-45700-data").then((function(a){p.hasArray(a)?(t[3].data=a,e.setState({submit:t})):d.submit(null,"dis-item/item",{param:{dis_code:45700},loading:!1}).then((function(a){t[3].data=a,e.setState({submit:t}),p.dataSave("dis-item-45700-data",a)}))})),v.then((function(a){p.getCache({cache:a.default.kindinfoSelect,name:"name",id:"value",callback:function(a){p.hasArray(a)?(t[4].data=a,e.setState({submit:t})):d.submit(null,"kind-info/select").then((function(a){t[4].data=a,e.setState({submit:t}),p.setCache()}))}}),p.getCache({cache:a.default.laboratoryselect,name:"name",id:"value",callback:function(a){p.hasArray(a)?(t[6].data=a,e.setState({submit:t})):d.submit(null,"project-team/laboratoryselect").then((function(a){t[6].data=a,e.setState({submit:t}),p.setCache()}))}})})),this.changeInfo(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.rows!==this.props.rows&&this.changeInfo(e)}},{key:"render",value:function(){var e=this,t=this.state.submit;return Object(n.jsx)("div",{children:Object(n.jsx)(f,{modal:!0,data:t,onChange:function(e,a,n){var i=n.name;t.forEach((function(t){t.name===i&&(t.value=e)}))},onSubmit:function(t){var a=Object(i.a)({},t),n="sp-additional-item/add",s="\u6dfb\u52a0";console.log(e.props.type),e.props.type&&(a=Object(i.a)(Object(i.a)({},t),{},{uuid:e.props.rows.uuid}),n="sp-additional-item/edit",s="\u7f16\u8f91"),d.submit(null,n,{param:a,submitLoading:"infoLoading"}).then((function(t){h.then((function(e){return e.default.success("".concat(s,"\u6210\u529f"))})),e.clears(),e.props.close&&e.props.close()}))},display:!0,init:function(t){return e.form=t}})})}}]),a}(c.a.Component)}}]);
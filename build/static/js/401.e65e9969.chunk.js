(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[401],{385:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(5),c=n(22),o=n(23),s=n(27),r=n(25),l=n(24),i=n(0),u=n.n(i),h=n(124),d=window,f=d.$http,p=d.$fn,m=d.$async,b=m((function(){return Promise.resolve().then(n.bind(null,94))})),j=m((function(){return n.e(6).then(n.bind(null,137))})),y=m((function(){return Promise.all([n.e(4),n.e(8)]).then(n.bind(null,133))})),g=n.e(9).then(n.bind(null,144)),v=m((function(){return n.e(69).then(n.bind(null,357))})),w=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data:[],pag:{},selectedKeys:[],type:"",rows:{},forms:[{label:"\u79d1\u5ba4",name:"project_pid",type:"select",data:[]},{label:"\u7269\u6d41\u4eba\u5458",name:"empl_id",type:"select",data:[]}]},e.model={},e.fetch=function(t){return p.fetch.call(Object(s.a)(e),"specimen/outsourcingEmployeeList",t)},e.cols=[{type:"checkbox"},{title:"\u79d1\u5ba4",field:"project_name"},{title:"\u7269\u6d41\u4eba\u5458",field:"real_name"},{title:"\u64cd\u4f5c",align:"tc",width:380,render:function(t){var n=t.rows;return Object(a.jsx)("div",{className:"plr5",children:Object(a.jsx)(b,{label:"\u7f16\u8f91",ghost:!0,onClick:function(){e.refs.modal.open(),e.setState({type:"edit",rows:n})}})})}}],e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this);var t=this.state.forms;g.then((function(n){var a=n.default;p.getCache({cache:a.ProjectTeamSelect,callback:function(n){p.hasArray(n)?(t[0].data=n,e.setState({forms:t})):f.submit(null,"project-team/select").then((function(n){t[0].data=n,e.setState({forms:t}),p.setCache()}))}}),p.getCache({cache:a.employeeSelect,callback:function(n){p.hasArray(n)?(t[1].data=n,e.setState({forms:t})):f.submit(null,"employee/select").then((function(n){t[1].data=n,e.setState({forms:t}),p.setCache()}))}})})),this.fetchFn()}},{key:"fetchFn",value:function(){this.fetch(this.model)}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,c=t.pullLoading,o=t.pag,s=t.rows,r=t.type,l=t.forms;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j,{data:l,onChange:function(t,n){return p.onChange.call(e,t,n)},onSubmit:p.onSubmit.bind(this),onAdd:this.onAdd,onReset:p.onReset.bind(this,l),loading:c}),Object(a.jsx)(y,{className:"xplr",cols:this.cols,data:n,loading:c,onRow:function(t){return e.setState({selectedKeys:t})},pag:o,onChange:function(t,n){return p.pageChange.call(e,{current:t,pageSize:n})}}),Object(a.jsx)(h.a,{ref:"modal",title:"\u5173\u8054\u5916\u5305\u7269\u6d41\u4eba\u5458",width:500,noFooter:!0,children:Object(a.jsx)(v,{type:r,rows:s,onClose:function(){return e.refs.modal.close()},fetch:function(){e.fetchFn()}})})]})}}]),n}(u.a.Component)}}]);
(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[286],{457:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(5),l=n(22),i=n(23),s=n(27),c=n(25),o=n(24),r=n(0),d=n.n(r),u=window,f=u.$http,h=u.$fn,b=u.$async,m=b((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),p=b((function(){return n.e(5).then(n.bind(null,135))})),x=b((function(){return n.e(6).then(n.bind(null,137))})),j=b((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),v=b((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(49)]).then(n.bind(null,348))})),g=n.e(9).then(n.bind(null,144)),w=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={data:[],pag:{},selectedRow:{},sexSelect:[]},e.statusSelect=[{value:"99",label:"\u5168\u90e8"},{label:"\u5ba1\u6838\u672a\u901a\u8fc7",value:-1},{label:"\u5f85\u5b8c\u5584",value:0},{label:"\u5f85\u5ba1\u6838",value:1},{label:"\u5ba1\u6838\u901a\u8fc7",value:2}],e.model={},e.forms=[{label:"\u72b6\u6001",name:"status",type:"select",data:e.statusSelect,nameStr:"label",idStr:"value"},{label:"\u533b\u9662",name:"hospital_id",type:"select",data:[],nameStr:"name",idStr:"value"},{label:"\u6761\u7801\u53f7",name:"spec_code",type:"input"},{label:"\u75c5\u4eba\u59d3\u540d",name:"patient_name",type:"input"},{label:"\u65e5\u671f",name:"date",type:"date-range",names:["start_date","end_date"]}],e.fetch=function(t){return h.fetch.call(Object(s.a)(e),"spec-case-info/index",t)},e.cols=[{title:"\u7533\u8bf7\u5355\u6761\u7801",field:"spec_code",width:130,sort:!0},{title:"\u53d7\u68c0\u4eba\u59d3\u540d",field:"patient_name",width:110},{title:"\u6027\u522b",field:"sex",width:50,render:function(t){var n=t.rows;return window.$fn.filterSelect(e.state.sexSelect,n.sex,"name","value")}},{title:"\u5e74\u9f84",field:"age",width:75},{title:"\u53d7\u68c0\u4eba\u7535\u8bdd",field:"patient_phone",width:100},{title:"\u8eab\u4efd\u8bc1\u53f7",field:"card_no",width:150},{title:"\u9001\u68c0\u5355\u4f4d",field:"hosp_name",width:220},{title:"\u9001\u68c0\u79d1\u5ba4",field:"department_name",width:100},{title:"\u9001\u68c0\u533b\u751f",field:"doctor",width:100},{title:"\u533b\u751f\u7535\u8bdd",field:"doctor_phone",width:100},{title:"\u91c7\u96c6\u65f6\u95f4",field:"coll_time",width:160},{title:"\u5ba1\u6838\u72b6\u6001",field:"status",width:80,render:function(t){var n=t.rows;return window.$fn.filterSelect(e.statusSelect,n.status,"label","value")}}],e.ButtonGroup=function(){return[{label:"\u8fd4\u56de",ghost:!0,onClick:function(){return h.back(Object(s.a)(e))}}]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.then((function(t){h.getCache({cache:t.default.BsHospitalSelect,name:"name",id:"value",callback:function(t){h.hasArray(t)?e.forms[1].data=t:f.submit(null,"bs-hospital/select").then((function(t){e.forms[1].data=t,h.setCache()}))}})})),h.dataSave("dis-item-45700-data").then((function(t){h.hasArray(t)?e.setState({sexSelect:t}):f.submit(null,"dis-item/item",{param:{dis_code:45700},loading:!1}).then((function(t){e.setState({sexSelect:t}),h.dataSave("dis-item-45700-data",t)}))})),this.fetch()}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,l=t.pullLoading,i=t.pag;return Object(a.jsxs)(p,{title:"\u53cc\u5f55\u5165",ButtonGroup:this.ButtonGroup(),children:[Object(a.jsx)(x,{data:this.forms,onChange:function(t,n){return h.onChange.call(e,t,n)},onSubmit:h.onSubmit.bind(this),onReset:h.onReset.bind(this,this.forms),loading:l}),Object(a.jsxs)("div",{className:"fx xplr ex",children:[Object(a.jsx)(j,{cols:this.cols,data:n,loading:l,onRow:function(t,n){e.setState({selectedRow:t}),f.submit(null,"spec-case-info/infoDoubleEntry",{param:{spec_code:t.spec_code},loadingText:"\u6570\u636e\u8bfb\u53d6\u4e2d..."}).then((function(t){h.hasArray(t)?(e.PatientDetailsRef1.doubleEntryInfo(t[0]),e.PatientDetailsRef2.doubleEntryInfo(t.length>1?t[1]:{})):(e.PatientDetailsRef1.doubleEntryInfo({}),e.PatientDetailsRef2.doubleEntryInfo({}))})).catch((function(t){e.PatientDetailsRef1.doubleEntryInfo({}),e.PatientDetailsRef2.doubleEntryInfo({})}))},pag:i,onChange:function(t,n){return h.pageChange.call(e,{current:t,pageSize:n})},onSort:function(t){return h.onSort.call(e,t)}}),Object(a.jsxs)("div",{className:"fv r4px",style:{width:"450px",border:"1px solid #F2F2F2",marginLeft:"10px"},children:[Object(a.jsx)("div",{className:"b p10",children:"\u7b2c\u4e00\u6b21\u5f55\u5165"}),Object(a.jsxs)("div",{className:"ex oxys p10",style:{paddingTop:0},children:[Object(a.jsxs)("div",{className:"fxm mb10",children:[Object(a.jsx)(m,{label:"\u4ee5\u6b64\u4e3a\u51c6",className:"mr10",ghost:!0,onClick:function(){return e.PatientDetailsRef1.takeStandard(1)}}),Object(a.jsx)(m,{label:"\u67e5\u770b\u56fe\u7247",className:"mr10",ghost:!0,onClick:function(){}})]}),Object(a.jsx)(v,{onRef:function(t){return e.PatientDetailsRef1=t}})]})]}),Object(a.jsxs)("div",{className:"fv r4px",style:{width:"450px",border:"1px solid #F2F2F2",marginLeft:"10px"},children:[Object(a.jsx)("div",{className:"b p10",children:"\u7b2c\u4e8c\u6b21\u5f55\u5165"}),Object(a.jsxs)("div",{className:"ex oxys p10",style:{paddingTop:0},children:[Object(a.jsxs)("div",{className:"fxm mb10",children:[Object(a.jsx)(m,{label:"\u4ee5\u6b64\u4e3a\u51c6",className:"mr10",ghost:!0,onClick:function(){return e.PatientDetailsRef2.takeStandard(2)}}),Object(a.jsx)(m,{label:"\u67e5\u770b\u56fe\u7247",className:"mr10",ghost:!0,onClick:function(){}})]}),Object(a.jsx)(v,{onRef:function(t){return e.PatientDetailsRef2=t}})]})]})]})]})}}]),n}(d.a.Component)}}]);
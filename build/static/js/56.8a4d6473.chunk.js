(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[56],{138:function(t,e,n){"use strict";var i=Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(22)]).then(n.bind(null,143)),a=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),c=window.$fn;e.a={interfaceConfirm:function(t,e,n,c){e?i.then((function(i){i.default({msg:"\u662f\u5426\u786e\u8ba4".concat(e,"\uff1f"),onOk:function(i){window.$http.submit(null,t,{param:n}).then((function(t){a.then((function(t){return t.default.success("".concat(e,"\u6210\u529f"))})),c(),i()}))}})})):window.$http.submit(null,t,{param:n}).then((function(t){a.then((function(t){return t.default.success("".concat(e,"\u6210\u529f"))})),c()}))},sysTime:function(t,e){var n=c.getUser(),i="9";i=c.hasObject(n)?e||(n.timeline_node?n.timeline_node:"9"):e||"9";var a=parseInt(i)>9?"".concat(i,":00:00"):"0".concat(i,":00:00"),s=new Date;s.getHours()<Number(i)?1===t&&s.setTime(s.getTime()-864e5):2===t&&s.setTime(s.getTime()+864e5);var l=s.getFullYear(),o=s.getMonth()+1>9?s.getMonth()+1:"0".concat(s.getMonth()+1),r=s.getDate()>9?s.getDate():"0".concat(s.getDate()),u=s.getHours()>9?s.getHours():"0".concat(s.getHours()),d=s.getMinutes()>9?s.getMinutes():"0".concat(s.getMinutes()),h=s.getSeconds()>9?s.getSeconds():"0".concat(s.getSeconds());return a?"".concat(l,"-").concat(o,"-").concat(r," ").concat(a):"".concat(l,"-").concat(o,"-").concat(r," ").concat(u,":").concat(d,":").concat(h)},intervalTime:function(t,e){var n=new Date,i=n;t&&(i=new Date(n.getTime()-24*t*60*60*1e3));var a=i.getFullYear(),c=i.getMonth()+1>9?i.getMonth()+1:"0".concat(i.getMonth()+1),s=i.getDate()>9?i.getDate():"0".concat(i.getDate()),l=i.getHours()>9?i.getHours():"0".concat(i.getHours()),o=i.getMinutes()>9?i.getMinutes():"0".concat(i.getMinutes()),r=i.getSeconds()>9?i.getSeconds():"0".concat(i.getSeconds());return e?"".concat(a,"-").concat(c,"-").concat(s," ").concat(e):"".concat(a,"-").concat(c,"-").concat(s," ").concat(l,":").concat(o,":").concat(r)},img_domain_url:function(t){if(t){var e=c.local("user");return e&&Object.keys(e).length>0&&e.img_domain?e.img_domain+t:t}return""},exportExcel:function(t){var e=t.api,n=t.apiType,i=t.param,a=t.cb;window.$http[n||"pull"](null,e,i).then((function(t){window.location.href=t.url,a&&a()}))},switchFlag:function(t){return t?1:0},flagSwitch:function(t){return"1"===String(t)}}},361:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return y}));var i=n(5),a=n(22),c=n(23),s=n(27),l=n(25),o=n(24),r=n(0),u=n.n(r),d=n(138),h=n(417),m=window,f=m.$http,b=m.$fn,g=m.$async,p=Promise.all([n.e(0),n.e(2),n.e(1),n.e(14)]).then(n.bind(null,123)),w=g((function(){return Promise.all([n.e(0),n.e(30)]).then(n.bind(null,204))})),v=g((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(13)]).then(n.bind(null,94))})),S=g((function(){return n.e(5).then(n.bind(null,135))})),j=g((function(){return Promise.all([n.e(1),n.e(223)]).then(n.bind(null,452))})),A=g((function(){return n.e(6).then(n.bind(null,137))})),x=g((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),M=g((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(49)]).then(n.bind(null,348))})),O=n.e(9).then(n.bind(null,144)),y=function(t){Object(l.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(a.a)(this,n);for(var c=arguments.length,l=new Array(c),o=0;o<c;o++)l[o]=arguments[o];return(t=e.call.apply(e,[this].concat(l))).state={data:[],pag:{},selectedKeys:[],selectedRow:{},batchEditFlag:!1,isEditor:!0,isSave:!0,isAudit:!0,imgModel:!1},t.statusSelect=[{value:"99",label:"\u5168\u90e8"},{label:"\u5ba1\u6838\u672a\u901a\u8fc7",value:-1},{label:"\u5f85\u5b8c\u5584",value:0},{label:"\u5f85\u5ba1\u6838",value:1},{label:"\u5ba1\u6838\u901a\u8fc7",value:2}],t.forms=[{label:"\u72b6\u6001",name:"status",type:"select",data:t.statusSelect,nameStr:"label",idStr:"value"},{label:"\u533b\u9662",name:"hospital_id",type:"select",data:[],nameStr:"name",idStr:"value"},{label:"\u6761\u7801\u53f7",name:"spec_code",type:"input"},{label:"\u75c5\u4eba\u59d3\u540d",name:"patient_name",type:"input"},{label:"\u63a5\u6536\u65e5\u671f",name:"date",type:"date-range",names:["start_date","end_date"]},{label:"\u4ec5\u663e\u793a\u6709\u56fe",name:"view_pic",type:"checkbox"}],t.sexSelect=[],t.model={},t.fetch=function(e){return b.fetch.call(Object(s.a)(t),"spec-case-info/index",e)},t.cols=[{type:"checkbox"},{title:"\u7533\u8bf7\u5355\u6761\u7801",field:"spec_code",width:130,sort:!0,render:function(t){var e=t.rows;return Object(i.jsxs)("div",{children:[e.spec_code," ",e.pic_path&&Object(i.jsx)("img",{src:h.a})]})}},{title:"\u5ba1\u6838\u72b6\u6001",field:"status",width:80,render:function(e){var n=e.rows;return window.$fn.filterSelect(t.statusSelect,n.status,"label","value")}},{title:"\u53d7\u68c0\u4eba\u59d3\u540d",field:"patient_name",width:110},{title:"\u6027\u522b",field:"sex",width:50,render:function(e){var n=e.rows;return window.$fn.filterSelect(t.sexSelect,n.sex,"name","value")}},{title:"\u5e74\u9f84",field:"age",width:75},{title:"\u53d7\u68c0\u4eba\u7535\u8bdd",field:"patient_phone",width:100},{title:"\u8eab\u4efd\u8bc1\u53f7",field:"card_no",width:150},{title:"\u9001\u68c0\u5355\u4f4d",field:"hosp_name",width:220},{title:"\u9001\u68c0\u79d1\u5ba4",field:"department_name",width:100},{title:"\u9001\u68c0\u533b\u751f",field:"doctor",width:100},{title:"\u533b\u751f\u7535\u8bdd",field:"doctor_phone",width:100},{title:"\u63a5\u6536\u65f6\u95f4",field:"receive_time",width:160},{title:"\u91c7\u6837\u65f6\u95f4",field:"coll_time",width:160}],t.setStatus=function(e){e?"0"===String(e)?t.setState({isSave:!0,isAudit:!0,isEditor:!1}):"1"===String(e)?t.setState({isSave:!0,isAudit:!1,isEditor:!1}):(String(e),t.setState({isSave:!0,isAudit:!0,isEditor:!1})):t.setState({isSave:!0,isAudit:!0,isEditor:!0})},t.nextSpec=function(t){console.log(t)},t.ButtonGroup=function(){return[{label:"\u6587\u4ef6\u5bfc\u5165",ghost:!0,onClick:function(){}},{label:"\u5feb\u6377\u5f55\u5165",ghost:!0,onClick:function(){b.push(Object(s.a)(t),b.getRoot(2).root+"basic-data-entry/index/quickentry")}},{label:"\u53cc\u5f55\u5165",ghost:!0,onClick:function(){b.push(Object(s.a)(t),b.getRoot(2).root+"basic-data-entry/index/doubleentry")}},{label:"\u5bfc\u51fa",ghost:!0,onClick:function(){d.a.exportExcel({api:"spec-case-info/viewsexport",param:{param:t.model}})}},{label:"\u6279\u91cf\u5ba1\u6838",ghost:!0,disabled:0===t.state.selectedKeys.length,onClick:function(){var e={data:t.state.selectedKeys.map((function(t){return{uuid:t.uuid,status:t.status}}))};d.a.interfaceConfirm("spec-case-info/batchpasscaseinfo","\u6279\u91cf\u5ba1\u6838",e,(function(){t.fetch(t.model)}))}}]},t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;O.then((function(e){b.getCache({cache:e.default.BsHospitalSelect,name:"name",id:"value",callback:function(e){b.hasArray(e)?t.forms[1].data=e:f.submit(null,"bs-hospital/select").then((function(e){t.forms[1].data=e,b.setCache()}))}})})),b.dataSave("dis-item-45700-data").then((function(e){b.hasArray(e)?t.sexSelect=e:f.submit(null,"dis-item/item",{param:{dis_code:45700},loading:!1}).then((function(e){t.sexSelect=e,b.dataSave("dis-item-45700-data",e)}))})),this.fetch()}},{key:"Derivedform",value:function(){f.submit(this,"spec-case-info/viewsexport",{param:this.model,submitLoading:"infoLoading"}).then((function(t){t?window.location.href=t.url:p.then((function(t){return t.default.error("\u64cd\u4f5c\u5931\u8d25")}))}))}},{key:"handleImg",value:function(){this.state.selectedRow.pic_path?this.setState({imgModel:!0}):p.then((function(t){return t.default.error("\u6682\u65e0\u56fe\u7247")}))}},{key:"render",value:function(){var t=this,e=this.state,n=e.data,a=e.pullLoading,c=e.pag;return Object(i.jsxs)(S,{title:"\u57fa\u7840\u8d44\u6599\u5f55\u5165",ButtonGroup:this.ButtonGroup(),children:[Object(i.jsx)(A,{data:this.forms,onChange:function(e,n){"view_pic"===Object.keys(e)[0]?b.onChange.call(t,{view_pic:e.view_pic?1:0},n):b.onChange.call(t,e,n)},onSubmit:b.onSubmit.bind(this),onReset:b.onReset.bind(this,this.forms),loading:a}),Object(i.jsxs)("div",{className:"fx xplr ex",children:[Object(i.jsx)(x,{cols:this.cols,data:n,loading:a,onRow:function(e,n,i){t.setState({selectedKeys:e,selectedRow:n}),b.isEmpty(n)?(t.setState({isSave:!0,isAudit:!0,isEditor:!0}),t.PatientDetailsRef.setState({noEditor:!0})):t.PatientDetailsRef.getInfos(n)},pag:c,onChange:function(e,n){return b.pageChange.call(t,{current:e,pageSize:n})},onSort:function(e){return b.onSort.call(t,e)}}),this.state.imgModel&&Object(i.jsx)("div",{className:"view-image",style:{width:"calc(100% - 500px)",height:"calc(100vh - 200px)",top:"130px",left:"30px"},children:Object(i.jsx)(j,{src:this.state.selectedRow.pic_path,onClose:function(){return t.setState({imgModel:!1})}})}),Object(i.jsxs)("div",{className:"fv r4px",style:{width:"450px",border:"1px solid #F2F2F2",marginLeft:"10px"},children:[Object(i.jsx)("div",{className:"b p10",children:"\u75c5\u4eba\u8be6\u7ec6\u4fe1\u606f"}),Object(i.jsxs)("div",{className:"ex oxys p10",style:{paddingTop:0},children:[Object(i.jsxs)("div",{className:"fxm mb10",children:[Object(i.jsx)(v,{label:"\u67e5\u770b\u56fe\u7247",className:"mr10",disabled:!b.hasObject(this.state.selectedRow),ghost:!0,onClick:function(){return t.handleImg()}}),Object(i.jsx)(v,{label:"\u4fdd\u5b58",className:"mr10",disabled:this.state.isSave,ghost:!0,onClick:function(){return t.PatientDetailsRef.saves()}}),Object(i.jsx)(v,{label:"\u5ba1\u6838",className:"mr10",disabled:this.state.isAudit,ghost:!0,onClick:function(){return t.PatientDetailsRef.audits()}}),Object(i.jsx)(v,{label:"\u7f16\u8f91",className:"mr10",disabled:this.state.isEditor,ghost:!0,onClick:function(){return t.PatientDetailsRef.edits()}}),Object(i.jsx)(w,{label:"\u6279\u91cf\u7f16\u8f91",value:this.state.batchEditFlag,onChange:function(e){return t.setState({batchEditFlag:e})}})]}),Object(i.jsx)(M,{onRef:function(e){return t.PatientDetailsRef=e},setStatus:function(e){return t.setStatus(e)},setVisible:function(e){return t.setState(e)},batchEditFlag:this.state.batchEditFlag,nextSpec:function(e){return t.nextSpec(e)}})]})]})]})]})}}]),n}(u.a.Component)},417:function(t,e,n){"use strict";e.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAALCAYAAABLcGxfAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM3Mzc3RjMwMjg4NTExRUJCQjdCQTQ5ODEwNEIwODVBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM3Mzc3RjMxMjg4NTExRUJCQjdCQTQ5ODEwNEIwODVBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzczNzdGMkUyODg1MTFFQkJCN0JBNDk4MTA0QjA4NUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzczNzdGMkYyODg1MTFFQkJCN0JBNDk4MTA0QjA4NUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6f96l2AAAA8ElEQVR42nTQsUtCURTH8fvkiVBPrEVoaLd0EnQJAmnT0ZrDPSIQsoYgHZyc/BsaXR6Im4SIb2rRyUk3EaKEwOEFgd8Dp+VxvfB5cHn3d+85xyn310/GmHv84A9xY18eui6fV1QwREylLYEsfAnM9HBNg49YWAIrzCXwhQJaWk4P+T1lGQmk9EYfJXT03xnqOMUWE4QSSOgrdzjGBs94wTumeukDjlw91MAYAa7RxoXu/9eB9CuBJKq4xScutfkgUr6M/FtGuEQR5xoYYWDpN5SeXZ3vFT5wI3XiBE4kkEPG1XG+6SR+lWd54RDNnQADANegMCKo7Q5OAAAAAElFTkSuQmCC"}}]);
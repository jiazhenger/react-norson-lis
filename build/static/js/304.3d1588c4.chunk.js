(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[304],{542:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));var a=n(5),i=n(22),l=n(23),c=n(27),u=n(25),r=n(24),s=n(0),d=n.n(s),o=window,h=o.$http,f=o.$fn,m=o.$async,v=m((function(){return n.e(15).then(n.bind(null,176))})),b=m((function(){return n.e(5).then(n.bind(null,135))})),p=m((function(){return n.e(6).then(n.bind(null,137))})),g=m((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11)]).then(n.bind(null,133))})),y=[{name:"\u5408\u683c",value:"1"},{name:"\u5f85\u6821\u51c6",value:"0"},{name:"\u505c\u7528",value:"-1"}],j=function(e){Object(u.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(i.a)(this,n);for(var l=arguments.length,u=new Array(l),r=0;r<l;r++)u[r]=arguments[r];return(e=t.call.apply(t,[this].concat(u))).state={data:[],pag:{},selectedKeys:[],deviceStadius:[]},e.forms=[{label:"\u8bbe\u5907\u540d\u79f0",name:"device_id",type:"select",data:[],nameStr:"title"},{label:"\u6267\u884c\u4eba",name:"ex_user"},{label:"\u72b6\u6001",name:"status",type:"select",data:[]}],e.model={device_id:f.query("id")||""},e.fetch=function(t){return f.fetch.call(Object(c.a)(e),"de-plan-log/index",t)},e.cols=[{title:"\u8bbe\u5907\u540d\u79f0",field:"device_name",width:200},{title:"\u7ed3\u679c",field:"content",width:100},{title:"\u6267\u884c\u4eba",field:"ex_user",width:100},{title:"\u72b6\u6001",field:"status",width:80,render:function(e){var t=e.rows,n=y.filter((function(e){return e.value===t.status}));return f.hasArray(n)?n[0].name:Object(a.jsx)(v,{value:null})}},{title:"\u4efb\u52a1\u751f\u6210\u65f6\u95f4",field:"created_at",width:150,align:"tc"},{title:"\u5b9e\u9645\u6821\u51c6\u65f6\u95f4",field:"operator_at",width:150,align:"tc"}],e.ButtonGroup=function(){return[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;f.dataSave("device").then((function(t){f.hasArray(t)?(e.forms[0].data=t,e.setState({deviceStadius:t,submit:e.state.submit})):h.pull(null,"device/select",{dataName:null}).then((function(t){t.forEach((function(e){e.title="".concat(e.device_name,"(").concat(e.device_number,") - ").concat(e.device_model)})),e.forms[0].data=t,e.setState({deviceStadius:t,submit:e.state.submit}),f.dataSave("device",t)}))})),this.forms[2].data=y,this.fetch(this.model)}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,i=t.pullLoading,l=t.pag;t.submit;return Object(a.jsxs)(b,{title:"\u6821\u51c6\u8bb0\u5f55",ButtonGroup:this.ButtonGroup(),children:[Object(a.jsx)(p,{data:this.forms,onChange:function(t,n){return f.onChange.call(e,t,n)},onSubmit:f.onSubmit.bind(this),onAdd:this.onAdd,onReset:f.onReset.bind(this,this.forms),loading:i,init:function(t){return t.setFieldsValue({device_id:e.model.device_id})}}),Object(a.jsx)(g,{className:"xplr",cols:this.cols,data:n,loading:i,onRow:function(t){return e.setState({selectedKeys:t})},pag:l,onChange:function(t,n){return f.pageChange.call(e,{current:t,pageSize:n})}})]})}}]),n}(d.a.Component)}}]);
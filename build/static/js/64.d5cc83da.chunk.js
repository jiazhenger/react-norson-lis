(this["webpackJsonpreact-my"]=this["webpackJsonpreact-my"]||[]).push([[64],{366:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var n=a(5),o=a(2),s=a(22),l=a(23),i=a(25),r=a(24),u=a(0),c=a.n(u),p=window,m=p.$http,d=p.$fn,b=p.$async,f=Promise.all([a.e(0),a.e(2),a.e(1),a.e(14)]).then(a.bind(null,123)),h=b((function(){return a.e(7).then(a.bind(null,142))})),v=a.e(9).then(a.bind(null,144)),y=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).typeOptions=[{label:"\u4fee\u6539\u75c5\u4eba\u8d44\u6599",value:"1"},{label:"\u4fee\u6539\u533b\u9662\u4fe1\u606f",value:"2"},{label:"\u5176\u4ed6\u7c7b\u578b",value:"3"}],e.state={data:[],submit:[{label:"\u6807\u672c\u6761\u7801",name:"spec_code",required:!0,disabled:!0},{label:"\u7c7b\u578b",name:"type",type:"select",data:e.typeOptions,nameStr:"label",idStr:"value"},{label:"\u59d3\u540d",name:"patient_name",required:!0},{label:"\u533b\u9662",name:"hosp_id",type:"select",data:[],nameStr:"name",idStr:"value",required:!0},{label:"\u5185\u5bb9",name:"content",type:"textarea",full:!0,width:"100%"},{label:"\u5907\u6ce8",name:"remark",type:"textarea",full:!0,width:"100%"},{label:"\u56fe\u7247",name:"img",type:"upload",params:{modular:130}}]},e.model={},e.changeInfo=function(t){console.log("\u4fe1\u606f\u4fee\u6539\u8d4b\u503c"),e.clears();var a=e.state.submit;t.type?(a[0].value=t.rows.spec_code||"",a[1].value=t.rows.type||"",a[2].value=t.rows.patient_name||"",a[3].value=t.rows.hosp_id||"",a[4].value=t.rows.content||"",a[5].value=t.rows.remark||"",a[6].value=t.rows.img||""):(a[0].value=t.rows.spec_code,a[2].value=t.rows.patient_name,a[3].value=t.rows.hosp_id),e.setState({submit:a})},e.submits=function(){console.log("\u4fe1\u606f\u4fee\u6539\u63d0\u4ea4"),e.form.submit()},e.clears=function(){console.log("\u4fe1\u606f\u4fee\u6539\u6e05\u7a7a");var t=e.state.submit;t.forEach((function(t){(e.props.type||"spec_code"!==t.name)&&(t.value="")})),e.setState({submit:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this);var t=this.state.submit;v.then((function(a){d.getCache({cache:a.default.BsHospitalSelect,name:"name",id:"value",callback:function(a){d.hasArray(a)?(t[3].data=a,e.setState({submit:t})):m.submit(null,"bs-hospital/select").then((function(a){t[3].data=a,e.setState({submit:t}),d.setCache()}))}})})),this.changeInfo(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.rows!==this.props.rows&&this.changeInfo(e)}},{key:"render",value:function(){var e=this,t=this.state.submit;return Object(n.jsx)("div",{children:Object(n.jsx)(h,{modal:!0,data:t,display:!0,onChange:function(e,a,n){var o=n.name;t.forEach((function(t){t.name===o&&(t.value=e)}))},onSubmit:function(t){var a=Object(o.a)({},t),n="sp-info-modify/add",s="\u6dfb\u52a0";console.log(e.props.type),e.props.type&&(a=Object(o.a)(Object(o.a)({},t),{},{uuid:e.props.rows.uuid}),n="sp-info-modify/edit",s="\u7f16\u8f91"),m.submit(null,n,{param:a,submitLoading:"infoLoading"}).then((function(t){f.then((function(e){return e.default.success("".concat(s,"\u6210\u529f"))})),e.clears(),e.props.close&&e.props.close()}))},init:function(t){return e.form=t}})})}}]),a}(c.a.Component)}}]);